{"hash":"5ac3a3f0a82f06e0d5641bb24b28600b399e0e72","fesm2020":{"code":"import * as i0 from '@angular/core';\nimport { Component, Input, EventEmitter, isDevMode, PLATFORM_ID, ViewEncapsulation, Inject, ViewChild, Output, HostListener, Injectable, Directive, NgModule } from '@angular/core';\nimport * as i3 from '@angular/common';\nimport { isPlatformBrowser, CommonModule } from '@angular/common';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport { map, takeUntil } from 'rxjs/operators';\nimport * as i1 from '@angular/router';\nimport { RouterModule } from '@angular/router';\n\nclass Ng3TourBackdropComponent {\r\n    constructor() {\r\n    }\r\n    ngOnInit() {\r\n        // console.log(this.props.targetWindowColor)\r\n        console.error('Backdrop props: ', this.props);\r\n    }\r\n}\r\nNg3TourBackdropComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourBackdropComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\r\nNg3TourBackdropComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: Ng3TourBackdropComponent, selector: \"ng3-tour-backdrop\", inputs: { props: \"props\" }, ngImport: i0, template: \"<div\\r\\n    class=\\\"tour-step-backdrop\\\"\\r\\n    [style.height.px]=\\\"props.targetFrameSize.pageHeight\\\"\\r\\n    [style.position]=\\\"props.position\\\"\\r\\n    [style.opacity]=\\\"props.opacity\\\"\\r\\n>\\r\\n  <div class=\\\"tour-step-backdrop__container\\\" >\\r\\n    <div \\r\\n      class=\\\"tour-step-backdrop__top\\\"\\r\\n      [style.height.px]=\\\"props.targetFrameSize.top\\\"\\r\\n      [style.background]=\\\"props.backdropColor\\\"\\r\\n    ></div>\\r\\n    <div \\r\\n      class=\\\"tour-step-backdrop__middle\\\"\\r\\n      [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n    >\\r\\n      <div \\r\\n        class=\\\"tour-step-backdrop__left\\\"\\r\\n        [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n        [style.width.px]=\\\"props.targetFrameSize.left\\\"\\r\\n        [style.background]=\\\"props.backdropColor\\\"\\r\\n      ></div>\\r\\n      <div\\r\\n        class=\\\"target-window\\\"\\r\\n        [style.width.px]=\\\"props.targetFrameSize.width\\\"\\r\\n        [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n        [style.background]=\\\"props.targetFrameColor\\\"\\r\\n      >\\r\\n      </div>\\r\\n      <div\\r\\n        class=\\\"tour-step-backdrop__right\\\"\\r\\n        [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n        [style.background]=\\\"props.backdropColor\\\"\\r\\n      ></div>\\r\\n    </div>\\r\\n    <div\\r\\n      class=\\\"tour-step-backdrop__bottom\\\"\\r\\n      [style.background]=\\\"props.backdropColor\\\"\\r\\n      [style.height.px]=\\\"props.targetFrameSize.pageHeight - props.targetFrameSize.bottom\\\"\\r\\n    ></div>\\r\\n  </div>\\r\\n</div>\\r\\n\", styles: [\".tour-step-backdrop{position:absolute;top:0;left:0;width:100%;z-index:1000}.tour-step-backdrop__container{position:absolute;top:0;left:0;height:100%;width:100%}.tour-step-backdrop__container .tour-step-backdrop__bottom,.tour-step-backdrop__container .tour-step-backdrop__right,.tour-step-backdrop__container .tour-step-backdrop__top,.tour-step-backdrop__container .tour-step-backdrop__left{position:relative}.tour-step-backdrop__container .tour-step-backdrop__top{width:100%}.tour-step-backdrop__container .tour-step-backdrop__middle{width:100%;display:flex;flex-wrap:nowrap}.tour-step-backdrop__container .tour-step-backdrop__middle .tour-step-backdrop__right{width:100%}.tour-step-backdrop__container .tour-step-backdrop__middle .target-window{flex-shrink:0;background:transparent}.tour-step-backdrop__container .tour-step-backdrop__middle .tour-step-backdrop__left{flex-shrink:0}.tour-step-backdrop__container .tour-step-backdrop__bottom{width:100%;height:100%}\\n\"] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourBackdropComponent, decorators: [{\r\n            type: Component,\r\n            args: [{ selector: 'ng3-tour-backdrop', template: \"<div\\r\\n    class=\\\"tour-step-backdrop\\\"\\r\\n    [style.height.px]=\\\"props.targetFrameSize.pageHeight\\\"\\r\\n    [style.position]=\\\"props.position\\\"\\r\\n    [style.opacity]=\\\"props.opacity\\\"\\r\\n>\\r\\n  <div class=\\\"tour-step-backdrop__container\\\" >\\r\\n    <div \\r\\n      class=\\\"tour-step-backdrop__top\\\"\\r\\n      [style.height.px]=\\\"props.targetFrameSize.top\\\"\\r\\n      [style.background]=\\\"props.backdropColor\\\"\\r\\n    ></div>\\r\\n    <div \\r\\n      class=\\\"tour-step-backdrop__middle\\\"\\r\\n      [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n    >\\r\\n      <div \\r\\n        class=\\\"tour-step-backdrop__left\\\"\\r\\n        [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n        [style.width.px]=\\\"props.targetFrameSize.left\\\"\\r\\n        [style.background]=\\\"props.backdropColor\\\"\\r\\n      ></div>\\r\\n      <div\\r\\n        class=\\\"target-window\\\"\\r\\n        [style.width.px]=\\\"props.targetFrameSize.width\\\"\\r\\n        [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n        [style.background]=\\\"props.targetFrameColor\\\"\\r\\n      >\\r\\n      </div>\\r\\n      <div\\r\\n        class=\\\"tour-step-backdrop__right\\\"\\r\\n        [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n        [style.background]=\\\"props.backdropColor\\\"\\r\\n      ></div>\\r\\n    </div>\\r\\n    <div\\r\\n      class=\\\"tour-step-backdrop__bottom\\\"\\r\\n      [style.background]=\\\"props.backdropColor\\\"\\r\\n      [style.height.px]=\\\"props.targetFrameSize.pageHeight - props.targetFrameSize.bottom\\\"\\r\\n    ></div>\\r\\n  </div>\\r\\n</div>\\r\\n\", styles: [\".tour-step-backdrop{position:absolute;top:0;left:0;width:100%;z-index:1000}.tour-step-backdrop__container{position:absolute;top:0;left:0;height:100%;width:100%}.tour-step-backdrop__container .tour-step-backdrop__bottom,.tour-step-backdrop__container .tour-step-backdrop__right,.tour-step-backdrop__container .tour-step-backdrop__top,.tour-step-backdrop__container .tour-step-backdrop__left{position:relative}.tour-step-backdrop__container .tour-step-backdrop__top{width:100%}.tour-step-backdrop__container .tour-step-backdrop__middle{width:100%;display:flex;flex-wrap:nowrap}.tour-step-backdrop__container .tour-step-backdrop__middle .tour-step-backdrop__right{width:100%}.tour-step-backdrop__container .tour-step-backdrop__middle .target-window{flex-shrink:0;background:transparent}.tour-step-backdrop__container .tour-step-backdrop__middle .tour-step-backdrop__left{flex-shrink:0}.tour-step-backdrop__container .tour-step-backdrop__bottom{width:100%;height:100%}\\n\"] }]\r\n        }], ctorParameters: function () { return []; }, propDecorators: { props: [{\r\n                type: Input,\r\n                args: ['props']\r\n            }] } });\n\n// @dynamic\r\nclass Ng3TourComponent {\r\n    constructor(tourService, \r\n    // @dynamic\r\n    platformId) {\r\n        this.tourService = tourService;\r\n        this.currentTarget = null;\r\n        this.currentStep = null;\r\n        this.stepTarget$ = null;\r\n        this.currentStep$ = new BehaviorSubject(this.currentStep);\r\n        this.modalElement = null;\r\n        this.timeoutForCulc = 100;\r\n        this.onDestroy = new Subject();\r\n        this.timeouts = [];\r\n        this.next = new EventEmitter();\r\n        this.prev = new EventEmitter();\r\n        this.done = new EventEmitter();\r\n        this.break = new EventEmitter();\r\n        this.isBrowser = isPlatformBrowser(platformId);\r\n        console.log('construct');\r\n    }\r\n    clickOutsideToClose($Event) {\r\n        if (this.currentStep) {\r\n            if (this.currentStep.modal.closeOnClickOutside && !this.modal.nativeElement.contains($Event.target)) {\r\n                this.onClose($Event);\r\n            }\r\n        }\r\n    }\r\n    onResize(event) {\r\n        if (this.currentStep) {\r\n            this.culcTargetSize(this.currentTarget);\r\n            this.getModal();\r\n        }\r\n    }\r\n    ngOnInit() {\r\n        console.log('sdfsf');\r\n        if (!this.isBrowser) {\r\n            return;\r\n        }\r\n        this.stepTarget$ = this.tourService.getStepTargetStream().pipe(map((step) => {\r\n            console.log('step: ', step);\r\n            if (step?.stepTarget && this.tourService.getTourStatus()) {\r\n                this.currentTarget = step.stepTarget;\r\n                this.currentStep = this.tourService.getStepByName(step.stepName);\r\n                if (isDevMode()) {\r\n                    console.log('currentStep in component: ', this.currentStep, this.modal.nativeElement);\r\n                }\r\n                this.culcTargetSize(step.stepTarget);\r\n                this.resetClasses();\r\n                this.currentStep.backdrop.targetFrameColor = 'transparent';\r\n                this.currentStep$.next(this.currentStep);\r\n                this.getModal();\r\n            }\r\n            else {\r\n                this.currentStep = null;\r\n            }\r\n            return step;\r\n        }));\r\n        this.tourService.getStepsStream().pipe(takeUntil(this.onDestroy), map((step) => {\r\n            this.currentStep = null;\r\n            if (step) {\r\n                this.resetClasses();\r\n            }\r\n            return step;\r\n        })).subscribe();\r\n        console.log('after init: ', this.currentStep, this.modal.nativeElement);\r\n    }\r\n    ngOnDestroy() {\r\n        this.onDestroy.next(null);\r\n        this.timeouts.forEach(i => clearTimeout(i));\r\n    }\r\n    resetClasses() {\r\n        const step = this.currentStep;\r\n        const props = step?.modal || this.tourService.getLastStep().modal;\r\n        const { animatedStep, arrowToTarget, placement, className } = props;\r\n        const arrow = arrowToTarget ? 'with-arrow' : '';\r\n        if (step) {\r\n            const animation = animatedStep ? 'animation-on' : '';\r\n            this.className = `${arrow} pos-${placement} ${animation} ${step.stepName} ${className}`.trim();\r\n        }\r\n        else {\r\n            const animation = 'fade-on';\r\n            this.className = `${arrow} pos-${placement} ${animation} ${className}`.trim();\r\n        }\r\n    }\r\n    culcTargetSize(target) {\r\n        const size = this.tourService.getSizeAndPosition(target);\r\n        const resize = this.currentStep.backdrop?.targetFrameResize;\r\n        this.currentStep.backdrop.targetFrameSize = resize\r\n            ? this.tourService.resizeTarget(size, resize)\r\n            : size;\r\n    }\r\n    defineStepPlacementToWindow(placement) {\r\n        const modalSize = this.currentStep.modal?.modalSize;\r\n        if (!modalSize || !this.currentStep.modal)\r\n            return;\r\n        this.currentStep.modal.modalStyles = this.currentStep.modal?.modalStyles || {};\r\n        const { modHeight, modWidth } = modalSize;\r\n        const HI = this.currentStep['modalProps'].horisontalIndent;\r\n        if (/^right-center$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.right = `${HI}px`;\r\n            this.currentStep.modal.modalStyles.top = `${Math.round(window.innerHeight / 2 - modHeight / 2)}px`;\r\n        }\r\n        else if (/^left-center$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.left = `${HI}px`;\r\n            this.currentStep.modal.modalStyles.top = `${Math.round(window.innerHeight / 2 - modHeight / 2)}px`;\r\n        }\r\n        else if (/^center$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.left = `${Math.round(window.innerWidth / 2 - modWidth / 2)}px`;\r\n            this.currentStep.modal.modalStyles.top = `${Math.round(window.innerHeight / 2 - modHeight / 2)}px`;\r\n        }\r\n    }\r\n    getModal(attempts = 3) {\r\n        this.modalElement = this.modal.nativeElement.querySelector('.tour-step-modal');\r\n        if (!this.modalElement && attempts > 0) {\r\n            console.error(attempts, this.modalElement, this.currentStep, this.modal.nativeElement.querySelector('.tour-step-wrapper'));\r\n            attempts -= 1;\r\n            this.timeouts[this.timeouts.length] = setTimeout(() => this.getModal(attempts), this.timeoutForCulc);\r\n            return this.timeouts;\r\n        }\r\n        return this.defineModalPlacementToTarget();\r\n    }\r\n    defineModalPlacementToTarget(modal = this.modalElement) {\r\n        if (!this.currentStep.modal || !this.currentStep.backdrop || !modal) {\r\n            console.error('no current step modal options', this.currentStep, this.modalElement);\r\n            return;\r\n        }\r\n        const modalRect = modal.getBoundingClientRect();\r\n        const modHeight = Math.round(modalRect.height ? modalRect.height : modalRect.bottom - modalRect.top);\r\n        const modWidth = Math.round(modalRect.width ? modalRect.width : modalRect.right - modalRect.left);\r\n        this.currentStep.modal.modalSize = { modWidth, modHeight };\r\n        const { placement, scrollTo } = this.currentStep.modal;\r\n        const { top = 0, bottom = 0, width = 0, left = 0, right = 0 } = this.currentStep.backdrop.targetFrameSize;\r\n        // console.error(modalRect, this.backdropOptions);\r\n        if (!placement) {\r\n            console.error('no placement');\r\n            return;\r\n        }\r\n        this.currentStep.modal.modalStyles = this.currentStep.modal.modalStyles || {};\r\n        const VI = this.currentStep.modal.verticalIndent || 0;\r\n        const HI = this.currentStep.modal.horisontalIndent || 0;\r\n        if (/^down$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.top = `${bottom + VI}px`;\r\n            this.currentStep.modal.modalStyles.left = `${Math.round(left - modWidth / 2)}px`;\r\n        }\r\n        else if (/^top$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.top = `${top - modHeight - VI}px`;\r\n            this.currentStep.modal.modalStyles.left = `${Math.round(left - modWidth / 2)}px`;\r\n        }\r\n        else if (/^left$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.top = `${top}px`;\r\n            this.currentStep.modal.modalStyles.left = `${left - modWidth - VI}px`;\r\n        }\r\n        else if (/^right$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.top = `${top}px`;\r\n            this.currentStep.modal.modalStyles.left = `${right + width + VI}px`;\r\n        }\r\n        else if (/^left-top$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.top = `${top - modHeight + HI}px`;\r\n            this.currentStep.modal.modalStyles.left = `${left - width - VI}px`;\r\n        }\r\n        else if (/^right-top$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.top = `${top - modHeight + HI}px`;\r\n            this.currentStep.modal.modalStyles.left = `${right + width + VI}px`;\r\n        }\r\n        else {\r\n            this.defineStepPlacementToWindow(placement);\r\n        }\r\n        if (this.currentStep.modal.autofocus && modal) {\r\n            this.setFocus(modal);\r\n        }\r\n        if (scrollTo) {\r\n            this.scrollTo();\r\n        }\r\n        this.currentStep$.next(this.currentStep);\r\n        setTimeout(() => {\r\n            console.error('ModalStyles', this.currentTarget.getBoundingClientRect(), this.currentStep.backdrop.targetFrameSize);\r\n        }, 10);\r\n    }\r\n    setFocus(modal) {\r\n        const nextBtn = modal.querySelector('.tour-btn-next');\r\n        const endBtn = modal.querySelector('.tour-btn-done');\r\n        if (nextBtn) {\r\n            nextBtn.focus();\r\n        }\r\n        else if (endBtn) {\r\n            endBtn.focus();\r\n        }\r\n    }\r\n    scrollTo() {\r\n        if (!this.currentStep.modal || !this.currentStep.backdrop) {\r\n            console.error('no current step modal options');\r\n            return;\r\n        }\r\n        const { placement, modalStyles } = this.currentStep.modal;\r\n        const { position } = modalStyles;\r\n        const { left = 0, top = 0, bottom = 0 } = this.currentStep.backdrop.targetFrameSize;\r\n        const HI = this.currentStep.modal.horisontalIndent;\r\n        const Top = placement !== 'top' ? top - 2 * HI : top - bottom - HI;\r\n        const behavior = this.currentStep.modal.smoothScroll ? 'smooth' : 'auto';\r\n        if (position === 'absolute') {\r\n            document.documentElement.scroll({ top: Top, left, behavior });\r\n        }\r\n        else {\r\n            document.documentElement.scroll({ top: 0, left: 0, behavior });\r\n        }\r\n    }\r\n    onNext(event) {\r\n        this.next.emit({\r\n            stepEvent: 'next',\r\n            index: this.currentStep.index + 1,\r\n            history: this.tourService.getHistory(),\r\n        });\r\n        this.tourService.nextStep();\r\n    }\r\n    onPrev(event) {\r\n        this.prev.emit({\r\n            stepEvent: 'prev',\r\n            index: this.currentStep.index - 1,\r\n            history: this.tourService.getHistory(),\r\n        });\r\n        this.tourService.prevStep();\r\n    }\r\n    onClose(event) {\r\n        if (this.currentStep.index !== this.currentStep['total'] - 1) {\r\n            this.break.emit({\r\n                stepEvent: 'break',\r\n                index: this.currentStep.index,\r\n                history: this.tourService.getHistory(),\r\n            });\r\n        }\r\n        else {\r\n            this.done.emit({\r\n                stepEvent: 'done',\r\n                index: this.currentStep.index,\r\n                history: this.tourService.getHistory(),\r\n            });\r\n        }\r\n        this.tourService.stopTour();\r\n    }\r\n}\r\nNg3TourComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourComponent, deps: [{ token: Ng3TourService }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Component });\r\nNg3TourComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: Ng3TourComponent, selector: \"ng3-tour-template\", outputs: { next: \"next\", prev: \"prev\", done: \"done\", break: \"break\" }, host: { listeners: { \"document:click\": \"clickOutsideToClose($event)\", \"window:resize\": \"onResize($event)\" } }, viewQueries: [{ propertyName: \"modal\", first: true, predicate: [\"modal\"], descendants: true }], exportAs: [\"tour\"], ngImport: i0, template: \"<div class=\\\"tour-step-wrapper\\\" *ngIf=\\\"stepTarget$ | async\\\" [ngClass]=\\\"className\\\" #modal>\\r\\n  <ng3-tour-backdrop\\r\\n    *ngIf=\\\"currentStep && currentStep.backdrop.isBackdrop\\\"\\r\\n    [props]=\\\"currentStep.backdrop\\\"\\r\\n  >\\r\\n  </ng3-tour-backdrop>\\r\\n  <div\\r\\n    *ngIf=\\\"currentStep\\\"\\r\\n    [ngClass]=\\\"currentStep.modal.className\\\"\\r\\n    class=\\\"tour-step-modal\\\"\\r\\n    [ngStyle]=\\\"currentStep.modal.modalStyles\\\"\\r\\n  > \\r\\n    <div *ngIf=\\\"!currentStep.modal.customTemplate\\\" class=\\\"tour-step-modal__content\\\">\\r\\n      <div class=\\\"tour-step-modal__header\\\">\\r\\n        <h3 class=\\\"tour-step-modal__title\\\">\\r\\n          {{currentStep.title}}\\r\\n        </h3>\\r\\n        <button class=\\\"tour-btn-close\\\" type=\\\"button\\\" (click)=\\\"onClose($event)\\\">\\r\\n          &times;\\r\\n        </button>\\r\\n      </div>\\r\\n      <div class=\\\"tour-step-modal__body\\\">\\r\\n        <p class=\\\"tour-step-modal__description\\\">\\r\\n          {{currentStep.description}}\\r\\n        </p>\\r\\n      </div>\\r\\n      <div class=\\\"tour-step-modal__footer\\\">\\r\\n        <div *ngIf=\\\"!currentStep.modal.withoutCounter\\\" class=\\\"tour-step-modal__counter\\\">\\r\\n          {{currentStep.index + 1}} {{currentStep.ctrlBtns['of']}} {{currentStep['total']}}\\r\\n        </div>\\r\\n        <button\\r\\n          *ngIf=\\\"!currentStep.modal.withoutPrev && currentStep.index\\\" \\r\\n          type=\\\"button\\\" \\r\\n          class=\\\"tour-btn tour-btn-prev\\\"\\r\\n          (click)=\\\"onPrev($event)\\\"\\r\\n        >\\r\\n          {{currentStep.ctrlBtns['prev']}}\\r\\n        </button>\\r\\n        <button\\r\\n          *ngIf=\\\"currentStep.index + 1 !== currentStep['total']\\\"\\r\\n          type=\\\"button\\\"\\r\\n          class=\\\"tour-btn tour-btn-next\\\"\\r\\n          (click)=\\\"onNext($event)\\\"          \\r\\n        >\\r\\n          {{currentStep.ctrlBtns['next']}}\\r\\n        </button>\\r\\n        <button\\r\\n          *ngIf=\\\"currentStep.index + 1 === currentStep['total']\\\"\\r\\n          type=\\\"button\\\"\\r\\n          class=\\\"tour-btn tour-btn-done\\\"\\r\\n          (click)=\\\"onClose($event)\\\"\\r\\n        >\\r\\n          {{currentStep.ctrlBtns['done']}}\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n      <div #content *ngIf=\\\"currentStep.modal.customTemplate\\\" class=\\\"content\\\">\\r\\n        <ng-content></ng-content>\\r\\n      </div>\\r\\n  </div>\\r\\n</div>\\r\\n<!-- *ngIf=\\\"currentStep as step\\\" -->\", styles: [\".tour-step-wrapper.fade-on .tour-step-modal{opacity:0}.tour-step-wrapper:not(.animation-on) .tour-step-modal{animation:fade .4s ease-in-out}.tour-step-wrapper.pos-down.animation-on .tour-step-modal{animation:stepDown .4s ease-in-out}.tour-step-wrapper.pos-down.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-bottom:.4rem solid white;border-left:.4rem solid transparent;border-right:.4rem solid transparent;top:-.4rem;right:45%}.tour-step-wrapper.pos-top.animation-on .tour-step-modal{animation:stepTop .4s ease-in-out}.tour-step-wrapper.pos-top.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-top:.4rem solid white;border-left:.4rem solid transparent;border-right:.4rem solid transparent;bottom:-.4rem;right:45%}.tour-step-wrapper.pos-left.animation-on .tour-step-modal{animation:stepLeft .4s ease-in-out}.tour-step-wrapper.pos-left.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-left:.4rem solid white;border-top:.4rem solid transparent;border-bottom:.4rem solid transparent;right:-.4rem;top:1rem}.tour-step-wrapper.pos-right.animation-on .tour-step-modal{animation:stepRight .4s ease-in-out}.tour-step-wrapper.pos-right.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-right:.4rem solid white;border-top:.4rem solid transparent;border-bottom:.4rem solid transparent;left:-.4rem;top:1rem}.tour-step-wrapper.pos-center.animation-on .tour-step-modal{animation:fade .4s ease-in-out}.tour-step-modal{background:white;border-radius:4px;box-shadow:0 0 12px 4px #0000008c;z-index:1100}.tour-step-modal__content{padding:.8rem;box-sizing:border-box}.tour-step-modal__header{width:100%;display:flex;justify-content:space-between}.tour-step-modal__title{font-weight:500;font-size:22px}.tour-step-modal__body{padding:1rem 0;min-height:50px;flex-grow:2}.tour-step-modal__description{line-height:24px}.tour-step-modal .tour-btn-close{background:transparent;border:none;color:#a9a9a9;font-size:1.6rem;margin:-5px -5px 0 0;cursor:pointer}.tour-step-modal .tour-btn-close:hover{color:var(--pale-grey)}.tour-step-modal__footer{padding:1px 0;display:flex;justify-content:space-between;align-items:center;justify-self:end;width:100%}.tour-btn{color:#2f2f2f;width:auto;height:auto;border-radius:4px;background:transparent;color:gray;cursor:pointer;padding:8px 16px;box-shadow:0 0 2px 2px #0000003d,inset 0 1px 3px #00000029;border:solid 1px grey;transition:all .3s}.tour-btn:hover,.tour-btn:focus{border-color:#737373;box-shadow:1px 1px 2px 1px #00000057;outline:none}@keyframes fade{0%{opacity:0}to{opacity:1}}@keyframes stepDown{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes stepLeft{0%{transform:translate(-30px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes stepRight{0%{transform:translate(30px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes stepTop{0%{transform:translateY(-30px);opacity:0}to{transform:translateY(0);opacity:1}}\\n\"], components: [{ type: Ng3TourBackdropComponent, selector: \"ng3-tour-backdrop\", inputs: [\"props\"] }], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { type: i3.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }], pipes: { \"async\": i3.AsyncPipe }, encapsulation: i0.ViewEncapsulation.None });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourComponent, decorators: [{\r\n            type: Component,\r\n            args: [{ selector: 'ng3-tour-template', encapsulation: ViewEncapsulation.None, exportAs: 'tour', template: \"<div class=\\\"tour-step-wrapper\\\" *ngIf=\\\"stepTarget$ | async\\\" [ngClass]=\\\"className\\\" #modal>\\r\\n  <ng3-tour-backdrop\\r\\n    *ngIf=\\\"currentStep && currentStep.backdrop.isBackdrop\\\"\\r\\n    [props]=\\\"currentStep.backdrop\\\"\\r\\n  >\\r\\n  </ng3-tour-backdrop>\\r\\n  <div\\r\\n    *ngIf=\\\"currentStep\\\"\\r\\n    [ngClass]=\\\"currentStep.modal.className\\\"\\r\\n    class=\\\"tour-step-modal\\\"\\r\\n    [ngStyle]=\\\"currentStep.modal.modalStyles\\\"\\r\\n  > \\r\\n    <div *ngIf=\\\"!currentStep.modal.customTemplate\\\" class=\\\"tour-step-modal__content\\\">\\r\\n      <div class=\\\"tour-step-modal__header\\\">\\r\\n        <h3 class=\\\"tour-step-modal__title\\\">\\r\\n          {{currentStep.title}}\\r\\n        </h3>\\r\\n        <button class=\\\"tour-btn-close\\\" type=\\\"button\\\" (click)=\\\"onClose($event)\\\">\\r\\n          &times;\\r\\n        </button>\\r\\n      </div>\\r\\n      <div class=\\\"tour-step-modal__body\\\">\\r\\n        <p class=\\\"tour-step-modal__description\\\">\\r\\n          {{currentStep.description}}\\r\\n        </p>\\r\\n      </div>\\r\\n      <div class=\\\"tour-step-modal__footer\\\">\\r\\n        <div *ngIf=\\\"!currentStep.modal.withoutCounter\\\" class=\\\"tour-step-modal__counter\\\">\\r\\n          {{currentStep.index + 1}} {{currentStep.ctrlBtns['of']}} {{currentStep['total']}}\\r\\n        </div>\\r\\n        <button\\r\\n          *ngIf=\\\"!currentStep.modal.withoutPrev && currentStep.index\\\" \\r\\n          type=\\\"button\\\" \\r\\n          class=\\\"tour-btn tour-btn-prev\\\"\\r\\n          (click)=\\\"onPrev($event)\\\"\\r\\n        >\\r\\n          {{currentStep.ctrlBtns['prev']}}\\r\\n        </button>\\r\\n        <button\\r\\n          *ngIf=\\\"currentStep.index + 1 !== currentStep['total']\\\"\\r\\n          type=\\\"button\\\"\\r\\n          class=\\\"tour-btn tour-btn-next\\\"\\r\\n          (click)=\\\"onNext($event)\\\"          \\r\\n        >\\r\\n          {{currentStep.ctrlBtns['next']}}\\r\\n        </button>\\r\\n        <button\\r\\n          *ngIf=\\\"currentStep.index + 1 === currentStep['total']\\\"\\r\\n          type=\\\"button\\\"\\r\\n          class=\\\"tour-btn tour-btn-done\\\"\\r\\n          (click)=\\\"onClose($event)\\\"\\r\\n        >\\r\\n          {{currentStep.ctrlBtns['done']}}\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n      <div #content *ngIf=\\\"currentStep.modal.customTemplate\\\" class=\\\"content\\\">\\r\\n        <ng-content></ng-content>\\r\\n      </div>\\r\\n  </div>\\r\\n</div>\\r\\n<!-- *ngIf=\\\"currentStep as step\\\" -->\", styles: [\".tour-step-wrapper.fade-on .tour-step-modal{opacity:0}.tour-step-wrapper:not(.animation-on) .tour-step-modal{animation:fade .4s ease-in-out}.tour-step-wrapper.pos-down.animation-on .tour-step-modal{animation:stepDown .4s ease-in-out}.tour-step-wrapper.pos-down.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-bottom:.4rem solid white;border-left:.4rem solid transparent;border-right:.4rem solid transparent;top:-.4rem;right:45%}.tour-step-wrapper.pos-top.animation-on .tour-step-modal{animation:stepTop .4s ease-in-out}.tour-step-wrapper.pos-top.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-top:.4rem solid white;border-left:.4rem solid transparent;border-right:.4rem solid transparent;bottom:-.4rem;right:45%}.tour-step-wrapper.pos-left.animation-on .tour-step-modal{animation:stepLeft .4s ease-in-out}.tour-step-wrapper.pos-left.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-left:.4rem solid white;border-top:.4rem solid transparent;border-bottom:.4rem solid transparent;right:-.4rem;top:1rem}.tour-step-wrapper.pos-right.animation-on .tour-step-modal{animation:stepRight .4s ease-in-out}.tour-step-wrapper.pos-right.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-right:.4rem solid white;border-top:.4rem solid transparent;border-bottom:.4rem solid transparent;left:-.4rem;top:1rem}.tour-step-wrapper.pos-center.animation-on .tour-step-modal{animation:fade .4s ease-in-out}.tour-step-modal{background:white;border-radius:4px;box-shadow:0 0 12px 4px #0000008c;z-index:1100}.tour-step-modal__content{padding:.8rem;box-sizing:border-box}.tour-step-modal__header{width:100%;display:flex;justify-content:space-between}.tour-step-modal__title{font-weight:500;font-size:22px}.tour-step-modal__body{padding:1rem 0;min-height:50px;flex-grow:2}.tour-step-modal__description{line-height:24px}.tour-step-modal .tour-btn-close{background:transparent;border:none;color:#a9a9a9;font-size:1.6rem;margin:-5px -5px 0 0;cursor:pointer}.tour-step-modal .tour-btn-close:hover{color:var(--pale-grey)}.tour-step-modal__footer{padding:1px 0;display:flex;justify-content:space-between;align-items:center;justify-self:end;width:100%}.tour-btn{color:#2f2f2f;width:auto;height:auto;border-radius:4px;background:transparent;color:gray;cursor:pointer;padding:8px 16px;box-shadow:0 0 2px 2px #0000003d,inset 0 1px 3px #00000029;border:solid 1px grey;transition:all .3s}.tour-btn:hover,.tour-btn:focus{border-color:#737373;box-shadow:1px 1px 2px 1px #00000057;outline:none}@keyframes fade{0%{opacity:0}to{opacity:1}}@keyframes stepDown{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes stepLeft{0%{transform:translate(-30px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes stepRight{0%{transform:translate(30px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes stepTop{0%{transform:translateY(-30px);opacity:0}to{transform:translateY(0);opacity:1}}\\n\"] }]\r\n        }], ctorParameters: function () { return [{ type: Ng3TourService }, { type: undefined, decorators: [{\r\n                    type: Inject,\r\n                    args: [PLATFORM_ID]\r\n                }] }]; }, propDecorators: { modal: [{\r\n                type: ViewChild,\r\n                args: ['modal']\r\n            }], next: [{\r\n                type: Output\r\n            }], prev: [{\r\n                type: Output\r\n            }], done: [{\r\n                type: Output\r\n            }], break: [{\r\n                type: Output\r\n            }], clickOutsideToClose: [{\r\n                type: HostListener,\r\n                args: ['document:click', ['$event']]\r\n            }], onResize: [{\r\n                type: HostListener,\r\n                args: ['window:resize', ['$event']]\r\n            }] } });\n\n// @dynamic\r\nclass Ng3TourService {\r\n    constructor(router, \r\n    // @dynamic\r\n    platformId) {\r\n        this.router = router;\r\n        this.tourStarted = false;\r\n        this.stepsStream$ = new BehaviorSubject(null);\r\n        this.stepTargetStream$ = new BehaviorSubject(null);\r\n        this.history = [];\r\n        this.routeChanged = false;\r\n        this.tourBreak = DefaultTourEventHandler;\r\n        this.tourEnd = DefaultTourEventHandler;\r\n        this.next = DefaultTourEventHandler;\r\n        this.prev = DefaultTourEventHandler;\r\n        this.nextStep = this.nextStep.bind(this);\r\n        this.prevStep = this.prevStep.bind(this);\r\n        this.stopTour = this.stopTour.bind(this);\r\n        this.getLang = this.getLang.bind(this);\r\n        this.isBrowser = isPlatformBrowser(platformId);\r\n        this.lang = this.isBrowser ? navigator.language : '';\r\n    }\r\n    validateOptions(tour) {\r\n        const regExpr = /^top$|^down$|^left$|^right$|^center$|^right-center$|^left-center$|^right-top$|^left-top$/i;\r\n        tour.steps.forEach((step, i) => {\r\n            if (step['modal']?.placement && !regExpr.test(step['modal']?.placement)) {\r\n                throw Error(`Placement option of the step ${i} of the ng3-tour is invalid ${step['modal']?.placement}`);\r\n            }\r\n        });\r\n        if (tour['tourModal']?.placement && !regExpr.test(tour['tourModal']?.placement)) {\r\n            throw Error(`Placement option of the ng3-tour is invalid ${tour['tourModal']?.placement}`);\r\n        }\r\n    }\r\n    setSteps(tour) {\r\n        const { steps, ...restProps } = tour;\r\n        const tourOptions = setTourProps(restProps);\r\n        this.steps = { ...tour }.steps.map((step, i) => {\r\n            step['index'] = i;\r\n            step['total'] = steps.length;\r\n            if (step['description'] && typeof step['description'] === 'object') {\r\n                step['description'] = this.defineLocalName(step['description']);\r\n            }\r\n            if (step['title'] && typeof step['title'] === 'object') {\r\n                step['title'] = this.defineLocalName(step['title']);\r\n            }\r\n            step['backdrop'] = { ...tourOptions.tourBackdrop, ...step['backdrop'] };\r\n            let { modalStyles, ...restProps } = step['modal'] || {};\r\n            modalStyles = { ...tourOptions.tourModal.modalStyles, ...modalStyles };\r\n            step['modal'] = { ...tourOptions.tourModal, ...restProps, modalStyles };\r\n            step['ctrlBtns'] = this.defineBtnsNames(tour['tourCtrlBtns'] || ButtonsDefaultTranslation);\r\n            return step;\r\n        });\r\n        if (isDevMode()) {\r\n            console.log('Development mode: ', isDevMode());\r\n            console.log('ng3-tour is initiated with steps:');\r\n            console.log(this.steps);\r\n        }\r\n    }\r\n    defineLocalName(obj) {\r\n        let result;\r\n        if (!this.isBrowser) {\r\n            return '';\r\n        }\r\n        if (obj.hasOwnProperty(this.lang)) {\r\n            result = obj[this.lang];\r\n        }\r\n        else {\r\n            const setLanguages = Object.keys(obj);\r\n            const ralatedLang = setLanguages.filter(l => l.includes(this.lang.slice(0, 2)))[0];\r\n            if (ralatedLang) {\r\n                result = obj[ralatedLang];\r\n            }\r\n            else {\r\n                result = obj[setLanguages[0]];\r\n            }\r\n        }\r\n        if (typeof result === 'string') {\r\n            return result;\r\n        }\r\n        console.error(`Tour configuration error with ${JSON.stringify(obj)}`);\r\n        return 'Error';\r\n    }\r\n    defineBtnsNames(btns) {\r\n        const btnCtrls = {};\r\n        for (let prop in btns) {\r\n            if (btns.hasOwnProperty(prop)) {\r\n                let result;\r\n                if (typeof btns[prop] === 'string') {\r\n                    result = btns[prop];\r\n                }\r\n                else if (typeof btns[prop] === 'object' && btns[prop][this.lang] === 'string') {\r\n                    result = btns[prop][this.lang];\r\n                }\r\n                else {\r\n                    const setOfLanguages = Object.keys(btns[prop]);\r\n                    const ralatedLang = setOfLanguages.filter(l => l.includes(this.lang.slice(0, 2)))[0];\r\n                    if (ralatedLang) {\r\n                        result = btns[prop][ralatedLang];\r\n                    }\r\n                    else {\r\n                        result = btns[prop][setOfLanguages[0]];\r\n                    }\r\n                    if (typeof result === 'string') {\r\n                        btnCtrls[prop] = result;\r\n                    }\r\n                    else if (this.isBrowser) {\r\n                        console.error(`Tour configuration error with ${JSON.stringify(btns)}`);\r\n                        btnCtrls[prop] = 'Error';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return btnCtrls;\r\n    }\r\n    initStep(step) {\r\n        // console.log(step, this.history)\r\n        const previousStep = this.history.length ? this.getLastStep() : { route: null };\r\n        const newStep = this.steps[step];\r\n        this.routeChanged = previousStep.route !== newStep.route;\r\n        this.history.push(step);\r\n        if (newStep.route && this.routeChanged) {\r\n            this.router.navigate([newStep.route]);\r\n        }\r\n        const delay = newStep.modal.delay;\r\n        this.stepsStream$.next({ stepName: newStep.stepName, delay });\r\n    }\r\n    getLang() {\r\n        return this.lang;\r\n    }\r\n    getHistory() {\r\n        return this.history;\r\n    }\r\n    getStepsLength() {\r\n        return this.steps.length;\r\n    }\r\n    resetStep(stepName, step) {\r\n        const index = typeof stepName === 'number' ? stepName : this.getStepByName(stepName).index;\r\n        this.steps[index] = { ...step };\r\n    }\r\n    getStepByName(stepName) {\r\n        return this.steps.filter(step => step.stepName === stepName)[0];\r\n    }\r\n    getStepByIndex(index = 0) {\r\n        return this.steps[index];\r\n    }\r\n    getLastStep() {\r\n        if (this.history.length)\r\n            return this.steps[this.history.slice(-1)[0]];\r\n        return null;\r\n    }\r\n    getStepsStream() {\r\n        return this.stepsStream$;\r\n    }\r\n    getStepTargetStream() {\r\n        return this.stepTargetStream$;\r\n    }\r\n    isRouteChanged() {\r\n        return this.routeChanged;\r\n    }\r\n    setTourStatus(status) {\r\n        this.tourStarted = status;\r\n    }\r\n    getTourStatus() {\r\n        return this.tourStarted;\r\n    }\r\n    startTour(tour) {\r\n        this.validateOptions(tour);\r\n        const tourEvantHendlers = { ...DefaultTourEventHandlers, ...tour['tourEvents'] };\r\n        const { tourBreak, tourStart, tourEnd, next, prev } = tourEvantHendlers;\r\n        tourStart({ tourEvent: 'start', tour });\r\n        this.tourBreak = tourBreak;\r\n        this.tourEnd = tourEnd;\r\n        this.next = next;\r\n        this.prev = prev;\r\n        this.setSteps(tour);\r\n        this.initStep(0);\r\n        this.setTourStatus(true);\r\n    }\r\n    stopTour() {\r\n        const index = this.getLastStep().index;\r\n        const latestStepIndex = this.steps.length - 1;\r\n        if (index < latestStepIndex) {\r\n            this.tourBreak({ tourEvent: 'break', step: index, history: this.history });\r\n        }\r\n        else if (latestStepIndex === index) {\r\n            this.tourEnd({ tourEvent: 'end', step: index, history: this.history });\r\n        }\r\n        this.setTourStatus(false);\r\n        this.stepTargetStream$.next(null);\r\n        this.stepsStream$.next(null);\r\n        this.steps.length = 0;\r\n        this.history.length = 0;\r\n    }\r\n    nextStep() {\r\n        const step = this.getLastStep().index + 1;\r\n        this.next({ tourEvent: 'next', step, history: this.history });\r\n        this.initStep(step);\r\n    }\r\n    prevStep() {\r\n        const step = this.getLastStep().index - 1;\r\n        this.prev({ tourEvent: 'prev', step, history: this.history });\r\n        this.initStep(step);\r\n    }\r\n    maxHeight() {\r\n        return Math.round(Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight, window.innerHeight));\r\n    }\r\n    getSizeAndPosition(el) {\r\n        const targetRect = el.getBoundingClientRect();\r\n        if (isDevMode() && (!targetRect || !el)) {\r\n            console.error(el, targetRect);\r\n        }\r\n        const bodyRect = document.body.getBoundingClientRect();\r\n        const top = Math.round(targetRect.top - bodyRect.top);\r\n        const left = Math.round(targetRect.left - bodyRect.left);\r\n        const bottom = Math.round(targetRect.bottom - bodyRect.top);\r\n        const right = Math.round(targetRect.left - bodyRect.left);\r\n        const height = Math.round(targetRect.height || bottom - top);\r\n        const width = Math.round(targetRect.width || right - left);\r\n        const pageHeight = this.maxHeight();\r\n        return { top, left, bottom, right, width, height, pageHeight };\r\n    }\r\n    resizeTarget(target, size) {\r\n        target['left'] -= size[0];\r\n        target['right'] += size[0];\r\n        target['top'] -= size[1] || size[0];\r\n        target['bottom'] += size[1] || size[0];\r\n        target['width'] += 2 * size[0];\r\n        target['height'] += 2 * (size[1] || size[0]);\r\n        return target;\r\n    }\r\n}\r\nNg3TourService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourService, deps: [{ token: i1.Router }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Injectable });\r\nNg3TourService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourService });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourService, decorators: [{\r\n            type: Injectable\r\n        }], ctorParameters: function () { return [{ type: i1.Router }, { type: undefined, decorators: [{\r\n                    type: Inject,\r\n                    args: [PLATFORM_ID]\r\n                }] }]; } });\n\n// @dynamic\r\nclass Ng3TourModalDirective {\r\n    constructor(elemRef, tour, \r\n    // @dynamic\r\n    platformId) {\r\n        this.elemRef = elemRef;\r\n        this.tour = tour;\r\n        this.onDestroy = new Subject();\r\n        this.isBrowser = isPlatformBrowser(platformId);\r\n    }\r\n    ngAfterViewInit() {\r\n        if (!this.isBrowser) {\r\n            return;\r\n        }\r\n        this.tour.getStepsStream().pipe(takeUntil(this.onDestroy), map((step) => {\r\n            if (step && step.stepName && this.name === step.stepName) {\r\n                step.stepTarget = this.elemRef.nativeElement;\r\n                if (isDevMode()) {\r\n                    console.error('Step in directive: ', step, this.elemRef.nativeElement);\r\n                    if (!step.stepTarget) {\r\n                        console.error('target absent', this.elemRef);\r\n                    }\r\n                    else {\r\n                        console.log(this.tour.getSizeAndPosition(step.stepTarget));\r\n                    }\r\n                }\r\n                step.targetSize = this.tour.getSizeAndPosition(step.stepTarget);\r\n                this.timeout = setTimeout(() => this.tour.getStepTargetStream().next(step), step.delay || 0);\r\n            }\r\n            return step;\r\n        })).subscribe();\r\n    }\r\n    ngOnDestroy() {\r\n        this.onDestroy.next(null);\r\n        clearTimeout(this.timeout);\r\n    }\r\n}\r\nNg3TourModalDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourModalDirective, deps: [{ token: i0.ElementRef }, { token: Ng3TourService }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Directive });\r\nNg3TourModalDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.1.1\", type: Ng3TourModalDirective, selector: \"[ng3TourStep]\", inputs: { name: [\"ng3TourStep\", \"name\"] }, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourModalDirective, decorators: [{\r\n            type: Directive,\r\n            args: [{\r\n                    selector: '[ng3TourStep]'\r\n                }]\r\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: Ng3TourService }, { type: undefined, decorators: [{\r\n                    type: Inject,\r\n                    args: [PLATFORM_ID]\r\n                }] }]; }, propDecorators: { name: [{\r\n                type: Input,\r\n                args: ['ng3TourStep']\r\n            }] } });\n\n// @dynamic\r\nclass Ng3TourEventDirective {\r\n    constructor(tourService, \r\n    // @dynamic\r\n    platformId) {\r\n        this.tourService = tourService;\r\n        this.next = new EventEmitter();\r\n        this.prev = new EventEmitter();\r\n        this.done = new EventEmitter();\r\n        this.break = new EventEmitter();\r\n        this.isBrowser = isPlatformBrowser(platformId);\r\n    }\r\n    ngOnInit() {\r\n        if (!this.isBrowser) {\r\n            return;\r\n        }\r\n        if (this.eventType === 'next') {\r\n            this.handleNext();\r\n        }\r\n        if (this.eventType === 'prev') {\r\n            this.handlePrev();\r\n        }\r\n        if (this.eventType === 'close') {\r\n            this.handleClose();\r\n        }\r\n    }\r\n    onClick(event) {\r\n        this.handler();\r\n    }\r\n    handleNext() {\r\n        return this.handler = () => {\r\n            this.next.emit({\r\n                tourEvent: 'next',\r\n                index: this.tourService.getLastStep().index + 1,\r\n                history: this.tourService.getHistory()\r\n            });\r\n            this.tourService.nextStep();\r\n        };\r\n    }\r\n    handlePrev() {\r\n        return this.handler = () => {\r\n            this.prev.emit({\r\n                tourEvent: 'prev',\r\n                index: this.tourService.getLastStep().index - 1,\r\n                history: this.tourService.getHistory()\r\n            });\r\n            this.tourService.prevStep();\r\n        };\r\n    }\r\n    handleClose() {\r\n        return this.handler = () => {\r\n            if (this.tourService.getLastStep().index + 1 === this.tourService.getLastStep()['total']) {\r\n                this.done.emit({\r\n                    tourEvent: 'done',\r\n                    index: this.tourService.getLastStep().index,\r\n                    history: this.tourService.getHistory()\r\n                });\r\n            }\r\n            else {\r\n                this.break.emit({\r\n                    tourEvent: 'break',\r\n                    index: this.tourService.getLastStep().index,\r\n                    history: this.tourService.getHistory()\r\n                });\r\n            }\r\n            this.tourService.stopTour();\r\n        };\r\n    }\r\n}\r\nNg3TourEventDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourEventDirective, deps: [{ token: Ng3TourService }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Directive });\r\nNg3TourEventDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.1.1\", type: Ng3TourEventDirective, selector: \"[modalEvent]\", inputs: { eventType: [\"modalEvent\", \"eventType\"] }, outputs: { next: \"next\", prev: \"prev\", done: \"done\", break: \"break\" }, host: { listeners: { \"click\": \"onClick($event)\" } }, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourEventDirective, decorators: [{\r\n            type: Directive,\r\n            args: [{\r\n                    selector: '[modalEvent]',\r\n                }]\r\n        }], ctorParameters: function () { return [{ type: Ng3TourService }, { type: undefined, decorators: [{\r\n                    type: Inject,\r\n                    args: [PLATFORM_ID]\r\n                }] }]; }, propDecorators: { eventType: [{\r\n                type: Input,\r\n                args: ['modalEvent']\r\n            }], next: [{\r\n                type: Output\r\n            }], prev: [{\r\n                type: Output\r\n            }], done: [{\r\n                type: Output\r\n            }], break: [{\r\n                type: Output\r\n            }], onClick: [{\r\n                type: HostListener,\r\n                args: ['click', ['$event']]\r\n            }] } });\n\n// @dynamic\r\nclass Ng3TourModule {\r\n    static forRoot() {\r\n        return {\r\n            ngModule: Ng3TourModule,\r\n            providers: [\r\n                Ng3TourService\r\n            ]\r\n        };\r\n    }\r\n    static forChild() {\r\n        return {\r\n            ngModule: Ng3TourModule,\r\n            providers: []\r\n        };\r\n    }\r\n}\r\nNg3TourModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\nNg3TourModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourModule, declarations: [Ng3TourBackdropComponent,\r\n        Ng3TourComponent,\r\n        Ng3TourModalDirective,\r\n        Ng3TourEventDirective], imports: [CommonModule,\r\n        RouterModule], exports: [Ng3TourBackdropComponent,\r\n        Ng3TourComponent,\r\n        Ng3TourModalDirective,\r\n        Ng3TourEventDirective] });\r\nNg3TourModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourModule, imports: [[\r\n            CommonModule,\r\n            RouterModule,\r\n        ]] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{\r\n                    declarations: [\r\n                        Ng3TourBackdropComponent,\r\n                        Ng3TourComponent,\r\n                        Ng3TourModalDirective,\r\n                        Ng3TourEventDirective,\r\n                    ],\r\n                    entryComponents: [Ng3TourComponent],\r\n                    imports: [\r\n                        CommonModule,\r\n                        RouterModule,\r\n                    ],\r\n                    exports: [\r\n                        Ng3TourBackdropComponent,\r\n                        Ng3TourComponent,\r\n                        Ng3TourModalDirective,\r\n                        Ng3TourEventDirective,\r\n                    ]\r\n                }]\r\n        }] });\n\nconst DefaultBackdrop = {\r\n    opacity: .7,\r\n    targetFrameColor: 'transparent',\r\n    backdropColor: 'rgb(20, 60, 60)',\r\n    targetFrameSize: { top: 0, left: 0, right: 0, height: 0, width: 0, bottom: 0, pageHeight: 0 },\r\n    targetFrameResize: [0],\r\n    isBackdrop: true,\r\n    position: 'absolute'\r\n};\r\nconst DefaultModalStyles = {\r\n    position: 'absolute',\r\n    minWidth: '250px',\r\n    minHeight: '150px',\r\n    maxWidth: '400px',\r\n    maxHeight: '600px',\r\n    color: '#121212',\r\n};\r\nconst DefaultModal = {\r\n    className: '',\r\n    horisontalIndent: 50,\r\n    verticalIndent: 20,\r\n    withoutCounter: false,\r\n    withoutPrev: false,\r\n    arrowToTarget: true,\r\n    placement: 'down',\r\n    modalStyles: DefaultModalStyles,\r\n    customTemplate: false,\r\n    delay: 1000,\r\n    animatedStep: true,\r\n    smoothScroll: false,\r\n    scrollTo: true,\r\n    closeOnClickOutside: false,\r\n    autofocus: true,\r\n    modalSize: {\r\n        modHeight: 100,\r\n        modWidth: 100\r\n    },\r\n    totalSteps: 1\r\n};\r\nconst ButtonsDefaultTranslation = {\r\n    done: {\r\n        'en-EN': 'done',\r\n        'ru-RU': 'закр',\r\n        'fr-FR': 'fini',\r\n    },\r\n    prev: {\r\n        'en-EN': 'prev',\r\n        'ru-RU': 'пред',\r\n        'fr-FR': 'préc'\r\n    },\r\n    next: {\r\n        'en-EN': 'next',\r\n        'ru-RU': 'след',\r\n        'fr-FR': 'proch',\r\n    },\r\n    of: {\r\n        'en-EN': 'of',\r\n        'fr-FR': 'de',\r\n        'ru-RU': \"из\",\r\n    }\r\n};\r\nconst DefaultTourEventHandler = (props) => { };\r\nconst DefaultTourEventHandlers = {\r\n    tourStart: DefaultTourEventHandler,\r\n    tourEnd: DefaultTourEventHandler,\r\n    tourBreak: DefaultTourEventHandler,\r\n    next: DefaultTourEventHandler,\r\n    prev: DefaultTourEventHandler,\r\n};\r\nconst DefaultTourOptions = {\r\n    tourCtrlBtns: ButtonsDefaultTranslation,\r\n    tourEvents: DefaultTourEventHandlers,\r\n    tourBackdrop: DefaultBackdrop,\r\n    tourModal: DefaultModal,\r\n};\r\nfunction setTourProps(props, defaultProps = DefaultTourOptions) {\r\n    const ctrlBtns = { ...defaultProps.tourCtrlBtns, ...props.tourCtrlBtns }, tourEvents = { ...defaultProps.tourEvents, ...props.tourEvents }, backdropOptions = { ...defaultProps.tourBackdrop, ...props.tourBackdrop }, tourModalOptions = { ...defaultProps.tourModal, ...props.tourModal };\r\n    return { tourCtrlBtns: ctrlBtns, tourEvents, tourModal: tourModalOptions, tourBackdrop: backdropOptions };\r\n}\n\n/*\r\n * Public API Surface of ng-tour\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { ButtonsDefaultTranslation, DefaultBackdrop, DefaultModal, DefaultModalStyles, DefaultTourEventHandler, DefaultTourEventHandlers, DefaultTourOptions, Ng3TourBackdropComponent, Ng3TourComponent, Ng3TourEventDirective, Ng3TourModalDirective, Ng3TourModule, Ng3TourService, setTourProps };\n//# sourceMappingURL=ng3-tour.mjs.map\n","map":{"version":3,"file":"ng3-tour.mjs","sources":["../../../projects/ng3-tour/src/lib/components/ng3-tour-backdrop/ng3-tour-backdrop.component.ts","../../../projects/ng3-tour/src/lib/components/ng3-tour-backdrop/ng3-tour-backdrop.component.html","../../../projects/ng3-tour/src/lib/components/ng3-tour.component.ts","../../../projects/ng3-tour/src/lib/components/ng3-tour.component.html","../../../projects/ng3-tour/src/lib/services/ng3-tour.service.ts","../../../projects/ng3-tour/src/lib/directives/ng3-tour-modal.directive.ts","../../../projects/ng3-tour/src/lib/directives/ng3-tour-modal-events.directive.ts","../../../projects/ng3-tour/src/lib/ng3-tour.module.ts","../../../projects/ng3-tour/src/lib/interfaces/ng3-tour.interface.ts","../../../projects/ng3-tour/src/public_api.ts","../../../projects/ng3-tour/src/ng3-tour.ts"],"sourcesContent":["import { Component, Input, OnInit} from '@angular/core';\r\n\r\nimport {IBackdrop} from '../../interfaces/ng3-tour.interface'\r\n\r\n@Component({\r\n  selector: 'ng3-tour-backdrop',\r\n  templateUrl: './ng3-tour-backdrop.component.html',\r\n  styleUrls: ['./ng3-tour-backdrop.component.scss'],\r\n})\r\nexport class Ng3TourBackdropComponent implements OnInit {\r\n  @Input('props') props!: IBackdrop;\r\n  \r\n  constructor() { \r\n    \r\n  }\r\n\r\n  ngOnInit() {\r\n    // console.log(this.props.targetWindowColor)\r\n    console.error('Backdrop props: ', this.props)\r\n  }\r\n\r\n}\r\n","<div\r\n    class=\"tour-step-backdrop\"\r\n    [style.height.px]=\"props.targetFrameSize.pageHeight\"\r\n    [style.position]=\"props.position\"\r\n    [style.opacity]=\"props.opacity\"\r\n>\r\n  <div class=\"tour-step-backdrop__container\" >\r\n    <div \r\n      class=\"tour-step-backdrop__top\"\r\n      [style.height.px]=\"props.targetFrameSize.top\"\r\n      [style.background]=\"props.backdropColor\"\r\n    ></div>\r\n    <div \r\n      class=\"tour-step-backdrop__middle\"\r\n      [style.height.px]=\"props.targetFrameSize.height\"\r\n    >\r\n      <div \r\n        class=\"tour-step-backdrop__left\"\r\n        [style.height.px]=\"props.targetFrameSize.height\"\r\n        [style.width.px]=\"props.targetFrameSize.left\"\r\n        [style.background]=\"props.backdropColor\"\r\n      ></div>\r\n      <div\r\n        class=\"target-window\"\r\n        [style.width.px]=\"props.targetFrameSize.width\"\r\n        [style.height.px]=\"props.targetFrameSize.height\"\r\n        [style.background]=\"props.targetFrameColor\"\r\n      >\r\n      </div>\r\n      <div\r\n        class=\"tour-step-backdrop__right\"\r\n        [style.height.px]=\"props.targetFrameSize.height\"\r\n        [style.background]=\"props.backdropColor\"\r\n      ></div>\r\n    </div>\r\n    <div\r\n      class=\"tour-step-backdrop__bottom\"\r\n      [style.background]=\"props.backdropColor\"\r\n      [style.height.px]=\"props.targetFrameSize.pageHeight - props.targetFrameSize.bottom\"\r\n    ></div>\r\n  </div>\r\n</div>\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  Output,\r\n  EventEmitter,\r\n  HostListener,\r\n  Inject,\r\n  PLATFORM_ID,\r\n  OnDestroy,\r\n  ViewEncapsulation,\r\n  ElementRef,\r\n  isDevMode,\r\n  AfterViewInit,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport {isPlatformBrowser} from '@angular/common';\r\nimport {BehaviorSubject, Observable, Subject} from 'rxjs';\r\nimport {map, takeUntil, timeout} from 'rxjs/operators';\r\n\r\nimport {\r\n  Ng3TourService,\r\n  ITourStep,\r\n  IModalEventHandlers,\r\n  StepSubject,\r\n  IModalPosition\r\n} from '../../public_api';\r\nimport { IModalStyles } from '../interfaces/ng3-tour.interface';\r\nimport { IStepProps } from '../interfaces/ng3-tour.interface';\r\n\r\n// @dynamic\r\n@Component({\r\n  selector: 'ng3-tour-template',\r\n  templateUrl: './ng3-tour.component.html',\r\n  styleUrls: ['./ng3-tour.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n  exportAs: 'tour',\r\n})\r\n\r\nexport class Ng3TourComponent implements OnInit, OnDestroy, IModalEventHandlers {\r\n  className!: string;\r\n  currentTarget: Element = null as unknown as Element;\r\n  currentStep: ITourStep = null as unknown as ITourStep;\r\n  stepTarget$ = null as unknown as Observable<StepSubject>;\r\n  currentStep$ = new BehaviorSubject<StepSubject>(this.currentStep);\r\n  isBrowser: boolean;\r\n  modalElement: Element = null as unknown as Element;\r\n  timeoutForCulc = 100;\r\n  onDestroy = new Subject<null>();\r\n  timeouts: ReturnType<typeof setTimeout>[] = [];\r\n  @ViewChild('modal') modal!: ElementRef<HTMLDivElement>\r\n  @Output() next: EventEmitter<any> = new EventEmitter();\r\n  @Output() prev: EventEmitter<any> = new EventEmitter();\r\n  @Output() done: EventEmitter<any> = new EventEmitter();\r\n  @Output() break: EventEmitter<any> = new EventEmitter();\r\n\r\n  constructor(\r\n    private readonly tourService: Ng3TourService,\r\n    // @dynamic\r\n    @Inject(PLATFORM_ID) platformId: {}) {\r\n      this.isBrowser = isPlatformBrowser(platformId);\r\n      console.log('construct')\r\n  }\r\n  @HostListener('document:click', ['$event']) clickOutsideToClose($Event: Event): void {\r\n    if (this.currentStep) {\r\n      if (this.currentStep.modal!.closeOnClickOutside && !this.modal.nativeElement.contains($Event.target as Node)) {\r\n        this.onClose($Event);\r\n      }\r\n    }       \r\n  }\r\n  @HostListener('window:resize', ['$event']) onResize(event: Event) {\r\n    if (this.currentStep) {\r\n      this.culcTargetSize(this.currentTarget);\r\n      this.getModal();\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log('sdfsf')\r\n    if (!this.isBrowser) {\r\n      return;\r\n    }\r\n    this.stepTarget$ = this.tourService.getStepTargetStream().pipe(\r\n      map((step: StepSubject) => {\r\n        console.log('step: ', step)\r\n        if (step?.stepTarget && this.tourService.getTourStatus()) {\r\n          this.currentTarget = step.stepTarget;\r\n          this.currentStep = this.tourService.getStepByName(step.stepName);\r\n          if (isDevMode()) {\r\n            console.log('currentStep in component: ', this.currentStep, this.modal.nativeElement);\r\n          }\r\n          this.culcTargetSize(step.stepTarget);\r\n          this.resetClasses();\r\n          this.currentStep.backdrop!.targetFrameColor = 'transparent';\r\n          this.currentStep$.next(this.currentStep);\r\n          this.getModal()\r\n        } else {\r\n          this.currentStep = null  as unknown as ITourStep;\r\n        }\r\n        return step;\r\n      })\r\n    )\r\n    this.tourService.getStepsStream().pipe(\r\n      takeUntil(this.onDestroy),\r\n      map((step: StepSubject) => {\r\n        this.currentStep = null  as unknown as ITourStep\r\n        if (step) {\r\n          this.resetClasses();\r\n        }\r\n        return step\r\n      })\r\n    ).subscribe();\r\n    console.log('after init: ', this.currentStep, this.modal.nativeElement)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.onDestroy.next(null);\r\n    this.timeouts.forEach(i => clearTimeout(i));\r\n  }\r\n  \r\n  private resetClasses(): void {\r\n    const step = this.currentStep;\r\n    const props = step?.modal || this.tourService.getLastStep().modal!;\r\n    const {animatedStep, arrowToTarget,  placement, className} = props;\r\n    const arrow = arrowToTarget ? 'with-arrow' : '';\r\n    if (step) {\r\n      const animation = animatedStep ? 'animation-on' : '';\r\n      this.className = `${arrow} pos-${placement} ${animation} ${step.stepName} ${className}`.trim();\r\n    } else {\r\n      const animation = 'fade-on';\r\n      this.className = `${arrow} pos-${placement} ${animation} ${className}`.trim();\r\n    }\r\n  }\r\n\r\n  private culcTargetSize(target: Element): void {\r\n    const size = this.tourService.getSizeAndPosition(target);\r\n    const resize = this.currentStep.backdrop?.targetFrameResize;\r\n    this.currentStep.backdrop!.targetFrameSize = resize \r\n      ? this.tourService.resizeTarget(size, resize) \r\n      : size;\r\n  }\r\n\r\n  private defineStepPlacementToWindow(placement: string) {\r\n    const modalSize = this.currentStep.modal?.modalSize\r\n    if (!modalSize || !this.currentStep.modal) return\r\n    this.currentStep.modal.modalStyles = this.currentStep.modal?.modalStyles || {} as IModalStyles\r\n    const {modHeight, modWidth} = modalSize;\r\n    const HI = this.currentStep['modalProps'].horisontalIndent;\r\n    if (/^right-center$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.right = `${HI}px`;\r\n      this.currentStep.modal.modalStyles.top = `${Math.round(window.innerHeight / 2 - modHeight / 2)}px`;\r\n    } else if (/^left-center$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.left = `${HI}px`;\r\n      this.currentStep.modal.modalStyles.top = `${Math.round(window.innerHeight / 2 - modHeight / 2)}px`;\r\n    } else if (/^center$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.left = `${Math.round(window.innerWidth / 2 - modWidth / 2)}px`;\r\n      this.currentStep.modal.modalStyles.top = `${Math.round(window.innerHeight / 2 - modHeight / 2)}px`;\r\n    }\r\n  }\r\n  public getModal (attempts = 3) {\r\n    this.modalElement = this.modal.nativeElement.querySelector('.tour-step-modal') as Element;\r\n    if (!this.modalElement && attempts > 0) {\r\n      console.error(attempts, this.modalElement, this.currentStep, this.modal.nativeElement.querySelector('.tour-step-wrapper'))\r\n      attempts -= 1;\r\n      this.timeouts[this.timeouts.length] = setTimeout(() => this.getModal(attempts), this.timeoutForCulc);\r\n      return this.timeouts;\r\n    }\r\n    return this.defineModalPlacementToTarget();\r\n  }\r\n\r\n  private defineModalPlacementToTarget(modal: Element = this.modalElement) {\r\n    if (!this.currentStep.modal || !this.currentStep.backdrop || !modal) {\r\n      console.error('no current step modal options', this.currentStep, this.modalElement)\r\n      return\r\n    }\r\n    const modalRect = modal.getBoundingClientRect();\r\n    const  modHeight = Math.round(modalRect.height ? modalRect.height : modalRect.bottom - modalRect.top);\r\n    const  modWidth = Math.round(modalRect.width ? modalRect.width : modalRect.right - modalRect.left);\r\n    this.currentStep.modal.modalSize = {modWidth, modHeight};\r\n    const {placement, scrollTo} = this.currentStep.modal;\r\n    const {top = 0, bottom = 0, width = 0, left = 0, right = 0} = this.currentStep.backdrop!.targetFrameSize!;\r\n    // console.error(modalRect, this.backdropOptions);\r\n    if (!placement) {\r\n      console.error('no placement')\r\n      return\r\n    }\r\n    this.currentStep.modal.modalStyles = this.currentStep.modal.modalStyles || {} as IModalStyles\r\n    const VI = this.currentStep.modal.verticalIndent || 0;\r\n    const HI = this.currentStep.modal.horisontalIndent || 0;\r\n    if (/^down$/i.test(placement!)) {\r\n      this.currentStep.modal.modalStyles.top = `${bottom + VI}px`;\r\n      this.currentStep.modal.modalStyles.left = `${Math.round(left - modWidth / 2)}px`;\r\n    } else if (/^top$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.top = `${top  - modHeight - VI}px`;\r\n      this.currentStep.modal.modalStyles.left = `${Math.round(left - modWidth / 2)}px`;\r\n    } else if (/^left$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.top = `${top}px`;\r\n      this.currentStep.modal.modalStyles.left = `${left - modWidth - VI}px`;\r\n    } else if (/^right$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.top = `${top}px`;\r\n      this.currentStep.modal.modalStyles.left = `${right + width + VI}px`;\r\n    } else if (/^left-top$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.top = `${top - modHeight + HI}px`;\r\n      this.currentStep.modal.modalStyles.left = `${left - width - VI}px`;\r\n    } else if (/^right-top$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.top = `${top - modHeight + HI}px`;\r\n      this.currentStep.modal.modalStyles.left = `${right + width + VI}px`;\r\n    } else {\r\n      this.defineStepPlacementToWindow(placement);\r\n    }\r\n    if (this.currentStep.modal.autofocus && modal) {\r\n      this.setFocus(modal);\r\n    }\r\n    if (scrollTo) {\r\n      this.scrollTo();\r\n    }\r\n    this.currentStep$.next(this.currentStep);\r\n    setTimeout(() => {\r\n      console.error('ModalStyles', this.currentTarget.getBoundingClientRect(), \r\n      this.currentStep.backdrop!.targetFrameSize)\r\n    }, 10);\r\n  }\r\n  \r\n  private setFocus(modal: Element) {\r\n    const nextBtn = modal.querySelector('.tour-btn-next') as HTMLElement;\r\n    const endBtn = modal.querySelector('.tour-btn-done') as HTMLElement;\r\n    if (nextBtn) {\r\n      nextBtn.focus();\r\n    } else if (endBtn) {\r\n      endBtn.focus();\r\n    }\r\n  }\r\n  private scrollTo() {\r\n    if (!this.currentStep.modal || !this.currentStep.backdrop) {\r\n      console.error('no current step modal options')\r\n      return\r\n    }\r\n    const {placement, modalStyles} = this.currentStep.modal;\r\n    const {position} = modalStyles!\r\n    const {left = 0, top = 0, bottom = 0} = this.currentStep.backdrop.targetFrameSize!;\r\n    const HI = this.currentStep.modal.horisontalIndent!;\r\n    const Top = placement !== 'top' ? top - 2 * HI : top - bottom - HI;\r\n    const behavior = this.currentStep.modal.smoothScroll ? 'smooth' : 'auto';\r\n    if (position === 'absolute') {\r\n      document.documentElement.scroll({top: Top, left, behavior});\r\n    } else {\r\n      document.documentElement.scroll({top: 0, left: 0, behavior});\r\n    }\r\n  }\r\n  public onNext(event: Event) {\r\n    this.next.emit({\r\n      stepEvent: 'next',\r\n      index: this.currentStep.index! + 1,\r\n      history: this.tourService.getHistory(),\r\n    });\r\n    this.tourService.nextStep();\r\n  }\r\n  public onPrev(event: Event) {\r\n    this.prev.emit({\r\n      stepEvent: 'prev',\r\n      index: this.currentStep.index! - 1,\r\n      history: this.tourService.getHistory(),\r\n    });\r\n    this.tourService.prevStep();\r\n  }\r\n  public onClose(event: Event) {\r\n    if (this.currentStep.index !== this.currentStep['total'] - 1) {\r\n      this.break.emit({\r\n        stepEvent: 'break',\r\n        index: this.currentStep.index,\r\n        history: this.tourService.getHistory(),\r\n      });\r\n    } else {\r\n      this.done.emit({\r\n        stepEvent: 'done',\r\n        index: this.currentStep.index,\r\n        history: this.tourService.getHistory(),\r\n      });\r\n    }\r\n    this.tourService.stopTour();\r\n  }\r\n}\r\n","<div class=\"tour-step-wrapper\" *ngIf=\"stepTarget$ | async\" [ngClass]=\"className\" #modal>\r\n  <ng3-tour-backdrop\r\n    *ngIf=\"currentStep && currentStep.backdrop.isBackdrop\"\r\n    [props]=\"currentStep.backdrop\"\r\n  >\r\n  </ng3-tour-backdrop>\r\n  <div\r\n    *ngIf=\"currentStep\"\r\n    [ngClass]=\"currentStep.modal.className\"\r\n    class=\"tour-step-modal\"\r\n    [ngStyle]=\"currentStep.modal.modalStyles\"\r\n  > \r\n    <div *ngIf=\"!currentStep.modal.customTemplate\" class=\"tour-step-modal__content\">\r\n      <div class=\"tour-step-modal__header\">\r\n        <h3 class=\"tour-step-modal__title\">\r\n          {{currentStep.title}}\r\n        </h3>\r\n        <button class=\"tour-btn-close\" type=\"button\" (click)=\"onClose($event)\">\r\n          &times;\r\n        </button>\r\n      </div>\r\n      <div class=\"tour-step-modal__body\">\r\n        <p class=\"tour-step-modal__description\">\r\n          {{currentStep.description}}\r\n        </p>\r\n      </div>\r\n      <div class=\"tour-step-modal__footer\">\r\n        <div *ngIf=\"!currentStep.modal.withoutCounter\" class=\"tour-step-modal__counter\">\r\n          {{currentStep.index + 1}} {{currentStep.ctrlBtns['of']}} {{currentStep['total']}}\r\n        </div>\r\n        <button\r\n          *ngIf=\"!currentStep.modal.withoutPrev && currentStep.index\" \r\n          type=\"button\" \r\n          class=\"tour-btn tour-btn-prev\"\r\n          (click)=\"onPrev($event)\"\r\n        >\r\n          {{currentStep.ctrlBtns['prev']}}\r\n        </button>\r\n        <button\r\n          *ngIf=\"currentStep.index + 1 !== currentStep['total']\"\r\n          type=\"button\"\r\n          class=\"tour-btn tour-btn-next\"\r\n          (click)=\"onNext($event)\"          \r\n        >\r\n          {{currentStep.ctrlBtns['next']}}\r\n        </button>\r\n        <button\r\n          *ngIf=\"currentStep.index + 1 === currentStep['total']\"\r\n          type=\"button\"\r\n          class=\"tour-btn tour-btn-done\"\r\n          (click)=\"onClose($event)\"\r\n        >\r\n          {{currentStep.ctrlBtns['done']}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n      <div #content *ngIf=\"currentStep.modal.customTemplate\" class=\"content\">\r\n        <ng-content></ng-content>\r\n      </div>\r\n  </div>\r\n</div>\r\n<!-- *ngIf=\"currentStep as step\" -->","import {Injectable, isDevMode, PLATFORM_ID, Inject} from '@angular/core';\r\nimport {isPlatformBrowser} from '@angular/common'\r\nimport {BehaviorSubject, Observable} from 'rxjs';\r\nimport {Router} from '@angular/router';\r\n\r\nimport {\r\n  ITour,\r\n  ICtrlBtns,\r\n  ITourStep,\r\n  DefaultTourEventHandler,\r\n  ButtonsDefaultTranslation,\r\n  DefaultTourEventHandlers,\r\n  setTourProps,\r\n  StepSubject,\r\n  ITargetFrameSize\r\n} from '../../public_api';\r\nimport { IStepProps, ITourEventHandlers, ITourProps } from '../interfaces/ng3-tour.interface';\r\n\r\n // @dynamic\r\n@Injectable()\r\nexport class Ng3TourService {\r\n  private steps!: ITourStep[];\r\n  private tourStarted = false;\r\n  private stepsStream$ = new BehaviorSubject<StepSubject>(null as unknown as StepSubject);\r\n  private stepTargetStream$ = new BehaviorSubject<StepSubject>(null as unknown as StepSubject);\r\n  private history: number[] = [];\r\n  private routeChanged = false;\r\n  private tourBreak = DefaultTourEventHandler;\r\n  private tourEnd = DefaultTourEventHandler;\r\n  private next = DefaultTourEventHandler;\r\n  private prev = DefaultTourEventHandler;\r\n  private isBrowser: boolean;\r\n  private lang: string;\r\n  constructor(\r\n    private router: Router,\r\n    // @dynamic\r\n    @Inject(PLATFORM_ID) platformId: {}) {\r\n    this.nextStep = this.nextStep.bind(this);\r\n    this.prevStep = this.prevStep.bind(this);\r\n    this.stopTour = this.stopTour.bind(this);\r\n    this.getLang = this.getLang.bind(this);\r\n    this.isBrowser = isPlatformBrowser(platformId);\r\n    this.lang = this.isBrowser ? navigator.language : '';\r\n  }\r\n\r\n\r\n  private validateOptions(tour: ITourProps): void | never {\r\n    const regExpr = /^top$|^down$|^left$|^right$|^center$|^right-center$|^left-center$|^right-top$|^left-top$/i;\r\n    tour.steps.forEach((step: IStepProps, i: number) => {\r\n      if (step['modal']?.placement && !regExpr.test(step['modal']?.placement)) {\r\n        throw Error(`Placement option of the step ${i} of the ng3-tour is invalid ${step['modal']?.placement}`);\r\n      }\r\n    });\r\n    if (tour['tourModal']?.placement && !regExpr.test(tour['tourModal']?.placement)) {\r\n      throw Error(`Placement option of the ng3-tour is invalid ${tour['tourModal']?.placement}`);\r\n    }\r\n  }\r\n\r\n  private setSteps(tour: ITourProps): void {\r\n    const {steps, ...restProps} = tour;\r\n    const tourOptions = setTourProps(restProps);\r\n    this.steps = {...tour}.steps.map((step, i) => {\r\n      step['index'] = i;\r\n      step['total'] = steps.length;\r\n      if (step['description'] && typeof step['description'] === 'object') {\r\n        step['description'] = this.defineLocalName(step['description']);\r\n      }\r\n      if (step['title'] && typeof step['title'] === 'object') {\r\n        step['title'] = this.defineLocalName(step['title'])\r\n      }\r\n      step['backdrop'] = {...tourOptions.tourBackdrop, ...step['backdrop']};\r\n      let {modalStyles, ...restProps} = step['modal'] || {};\r\n      modalStyles = {...tourOptions.tourModal!.modalStyles, ...modalStyles};\r\n      step['modal'] = {...tourOptions.tourModal, ...restProps, modalStyles};\r\n      step['ctrlBtns'] = this.defineBtnsNames(tour['tourCtrlBtns'] || ButtonsDefaultTranslation);\r\n      return step as ITourStep;\r\n    });\r\n    if (isDevMode()) {\r\n      console.log('Development mode: ', isDevMode())\r\n      console.log('ng3-tour is initiated with steps:');\r\n      console.log(this.steps);\r\n    }\r\n  }\r\n\r\n  private defineLocalName(obj: {[key: string]: string}): string {\r\n    let result: string;\r\n    if (!this.isBrowser) {\r\n      return '';\r\n    }\r\n    if (obj.hasOwnProperty(this.lang)) {\r\n      result = obj[this.lang];\r\n    } else {\r\n      const setLanguages = Object.keys(obj);\r\n      const ralatedLang = setLanguages.filter(l => l.includes(this.lang.slice(0, 2)))[0];\r\n      if (ralatedLang) {\r\n        result = obj[ralatedLang]\r\n      } else {\r\n        result = obj[setLanguages[0]];\r\n      }\r\n    }\r\n    if (typeof result === 'string') {\r\n      return result;\r\n    }\r\n    console.error(`Tour configuration error with ${JSON.stringify(obj)}`)\r\n    return 'Error'\r\n  }\r\n\r\n  private defineBtnsNames(btns: ICtrlBtns): {[propName: string]: string} {\r\n    const btnCtrls = {} as {[propName: string]: string};\r\n    for (let prop in btns) {\r\n      if (btns.hasOwnProperty(prop)) {\r\n        let result: string;\r\n        if (typeof btns[prop] === 'string') {\r\n          result = btns[prop];\r\n        } else if (typeof btns[prop] === 'object' && btns[prop][this.lang] === 'string') {\r\n          result = btns[prop][this.lang]\r\n        } else {\r\n          const setOfLanguages = Object.keys(btns[prop]);\r\n          const ralatedLang = setOfLanguages.filter(l => l.includes(this.lang.slice(0, 2)))[0];\r\n          if (ralatedLang) {\r\n            result = btns[prop][ralatedLang]\r\n          } else {\r\n            result = btns[prop][setOfLanguages[0]];\r\n          }\r\n          if (typeof result === 'string') {\r\n            btnCtrls[prop] = result;\r\n          } else if (this.isBrowser) {\r\n            console.error(`Tour configuration error with ${JSON.stringify(btns)}`);\r\n            btnCtrls[prop] = 'Error'\r\n          }  \r\n        }\r\n      }\r\n    }\r\n    return btnCtrls;\r\n  }\r\n\r\n  public initStep(step: number): void {\r\n    // console.log(step, this.history)\r\n    const previousStep = this.history.length ? this.getLastStep() : {route: null};\r\n    const newStep = this.steps[step];\r\n    this.routeChanged = previousStep.route !== newStep.route;\r\n    this.history.push(step);\r\n    if (newStep.route && this.routeChanged) {\r\n      this.router.navigate([newStep.route]);\r\n    }\r\n    const delay = newStep.modal!.delay;\r\n    this.stepsStream$.next({stepName: newStep.stepName, delay});\r\n  }\r\n\r\n  public getLang() {\r\n    return this.lang;\r\n  }\r\n  public getHistory() {\r\n    return this.history;\r\n  }\r\n  public getStepsLength() {\r\n    return this.steps.length;\r\n  }\r\n  public resetStep(stepName: string | number, step: ITourStep) {\r\n    const index = typeof stepName === 'number' ? stepName : this.getStepByName(stepName).index!;\r\n    this.steps[index] = {...step};\r\n  }\r\n  public getStepByName(stepName: string): ITourStep {\r\n    return this.steps.filter(step => step.stepName === stepName)[0];\r\n  }\r\n  public getStepByIndex(index = 0): ITourStep {\r\n    return this.steps[index];\r\n  }\r\n  public getLastStep(): ITourStep {\r\n    if (this.history.length) return this.steps[this.history.slice(-1)[0]];\r\n    return null as unknown as ITourStep;\r\n  }\r\n  public getStepsStream(): BehaviorSubject<StepSubject> {\r\n    return this.stepsStream$;\r\n  }\r\n  public getStepTargetStream(): BehaviorSubject<StepSubject> {\r\n    return this.stepTargetStream$;\r\n  }\r\n  public isRouteChanged() {\r\n    return this.routeChanged;\r\n  }\r\n  private setTourStatus(status: boolean): void {\r\n    this.tourStarted = status;\r\n  }\r\n  public getTourStatus() {\r\n    return this.tourStarted;\r\n  }\r\n  public startTour(tour: ITourProps): void {\r\n    this.validateOptions(tour);\r\n    const tourEvantHendlers = {...DefaultTourEventHandlers, ...tour['tourEvents']} as ITourEventHandlers;\r\n    const  {tourBreak, tourStart, tourEnd, next, prev} = tourEvantHendlers\r\n    tourStart({tourEvent: 'start', tour});\r\n    this.tourBreak = tourBreak;\r\n    this.tourEnd = tourEnd;\r\n    this.next = next;\r\n    this.prev = prev;\r\n    this.setSteps(tour);\r\n    this.initStep(0);\r\n    this.setTourStatus(true);\r\n  }\r\n  public stopTour() {\r\n    const index = this.getLastStep().index;\r\n    const latestStepIndex = this.steps.length - 1;\r\n    if ( index! < latestStepIndex) {\r\n      this.tourBreak({tourEvent: 'break', step: index, history: this.history});\r\n    } else if (latestStepIndex === index) {\r\n      this.tourEnd({tourEvent: 'end', step: index, history: this.history});\r\n    }\r\n    this.setTourStatus(false);\r\n    this.stepTargetStream$.next(null as unknown as ITourStep);\r\n    this.stepsStream$.next(null as unknown as ITourStep);\r\n    this.steps.length = 0;\r\n    this.history.length = 0;\r\n  }\r\n  public nextStep() {\r\n    const step = this.getLastStep().index! + 1;\r\n    this.next({tourEvent: 'next', step, history: this.history});\r\n    this.initStep(step);\r\n  }\r\n  public prevStep() {\r\n    const step = this.getLastStep().index! - 1;\r\n    this.prev({tourEvent: 'prev', step, history: this.history});\r\n    this.initStep(step);\r\n  }\r\n  public maxHeight() {\r\n    return Math.round(Math.max(\r\n      document.body.scrollHeight,\r\n      document.documentElement.scrollHeight,\r\n      document.body.offsetHeight,\r\n      document.documentElement.offsetHeight,\r\n      document.body.clientHeight,\r\n      document.documentElement.clientHeight,\r\n      window.innerHeight\r\n    ));\r\n  }\r\n  public getSizeAndPosition(el: Element) {\r\n    const targetRect = el.getBoundingClientRect();\r\n    if (isDevMode() && (!targetRect || !el) ) {\r\n      console.error(el, targetRect)\r\n    }\r\n    const bodyRect = document.body.getBoundingClientRect();\r\n    const top = Math.round(targetRect.top - bodyRect.top);\r\n    const left = Math.round(targetRect.left - bodyRect.left);\r\n    const bottom = Math.round(targetRect.bottom - bodyRect.top);\r\n    const right = Math.round(targetRect.left - bodyRect.left);\r\n    const height = Math.round(targetRect.height || bottom - top);\r\n    const width = Math.round(targetRect.width || right - left);\r\n    const pageHeight = this.maxHeight();\r\n    return {top, left, bottom, right, width, height, pageHeight};\r\n  }\r\n\r\n  public resizeTarget(target: ITargetFrameSize, size: number[]): ITargetFrameSize {\r\n    target['left'] -= size[0];\r\n    target['right'] += size[0];\r\n    target['top'] -= size[1] || size[0];\r\n    target['bottom'] += size[1] || size[0];\r\n    target['width'] += 2 * size[0];\r\n    target['height'] += 2 * (size[1] || size[0]);\r\n    return target;\r\n  }\r\n}\r\n","import { Directive, Input, Inject, PLATFORM_ID, AfterViewInit, OnDestroy, ElementRef, isDevMode} from '@angular/core';\r\nimport {isPlatformBrowser} from '@angular/common';\r\nimport {Subject} from 'rxjs';\r\nimport {map, takeUntil} from 'rxjs/operators';\r\n\r\nimport {Ng3TourService, StepSubject} from '../../public_api';\r\nimport { TimeInterval } from 'rxjs/internal/operators/timeInterval';\r\n\r\n// @dynamic\r\n@Directive({\r\n  selector: '[ng3TourStep]'\r\n})\r\nexport class Ng3TourModalDirective implements AfterViewInit, OnDestroy {\r\n  @Input('ng3TourStep') name!: string;\r\n  private readonly onDestroy = new Subject<any>();\r\n  isBrowser: boolean;\r\n  timeout!: ReturnType<typeof setTimeout>;\r\n  constructor(\r\n    private elemRef: ElementRef,\r\n    private readonly tour: Ng3TourService,   \r\n    // @dynamic\r\n    @Inject(PLATFORM_ID) platformId: {}) {\r\n      this.isBrowser = isPlatformBrowser(platformId);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (!this.isBrowser) {\r\n      return;\r\n    }\r\n    this.tour.getStepsStream().pipe(\r\n      takeUntil(this.onDestroy),\r\n      map((step: StepSubject) => {\r\n        if (step && step.stepName && this.name === step.stepName) {\r\n          step.stepTarget = this.elemRef.nativeElement;\r\n          \r\n          if (isDevMode()) {\r\n            console.error('Step in directive: ', step, this.elemRef.nativeElement)\r\n            if (!step.stepTarget) {\r\n              console.error('target absent', this.elemRef);\r\n            } else {\r\n              console.log(this.tour.getSizeAndPosition(step.stepTarget!))\r\n            }\r\n          }\r\n          step.targetSize = this.tour.getSizeAndPosition(step.stepTarget!)\r\n          this.timeout = setTimeout(() => this.tour.getStepTargetStream().next(step), step.delay || 0);\r\n      \r\n        }\r\n        return step;\r\n      }\r\n    )).subscribe();\r\n  }\r\n  ngOnDestroy() {\r\n    this.onDestroy.next(null);\r\n    clearTimeout(this.timeout);\r\n  }\r\n}\r\n","import {\r\n    Directive,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    OnInit,\r\n    Inject,\r\n    PLATFORM_ID,\r\n    HostListener\r\n} from '@angular/core';\r\nimport {isPlatformBrowser} from '@angular/common';\r\n\r\nimport {Ng3TourService, IStepEventProps} from '../../public_api';\r\n// @dynamic\r\n@Directive({\r\n    selector: '[modalEvent]',\r\n})\r\nexport class Ng3TourEventDirective implements OnInit {\r\n    @Input('modalEvent') eventType!: string; // possible values 'next', 'prev', 'close'\r\n // possible values 'next', 'prev', 'close'\r\n    isBrowser: boolean;\r\n\r\n    @Output() next: EventEmitter<IStepEventProps> = new EventEmitter();\r\n    @Output() prev: EventEmitter<IStepEventProps> = new EventEmitter();\r\n    @Output() done: EventEmitter<IStepEventProps> = new EventEmitter();\r\n    @Output() break: EventEmitter<IStepEventProps> = new EventEmitter();\r\n    handler!: () => void;\r\n    constructor(\r\n        private readonly tourService: Ng3TourService,\r\n        // @dynamic\r\n        @Inject(PLATFORM_ID) platformId: {}) {\r\n        this.isBrowser = isPlatformBrowser(platformId);\r\n    }\r\n    ngOnInit() {\r\n        if (!this.isBrowser) {\r\n            return;\r\n        }\r\n        if (this.eventType === 'next') {\r\n           this.handleNext();\r\n        }\r\n        if (this.eventType === 'prev') {\r\n            this.handlePrev();\r\n        }\r\n        if (this.eventType === 'close') {\r\n            this.handleClose();\r\n        }\r\n    }\r\n    @HostListener('click', ['$event']) onClick(event: Event) {\r\n        this.handler();\r\n    }\r\n    handleNext() {\r\n        return this.handler = () => {\r\n            this.next.emit({\r\n                tourEvent: 'next',\r\n                index: this.tourService.getLastStep().index! + 1,\r\n                history: this.tourService.getHistory()\r\n            });\r\n            this.tourService.nextStep();\r\n        };\r\n    }\r\n    handlePrev() {\r\n        return this.handler = () => {\r\n            this.prev.emit({\r\n                tourEvent: 'prev',\r\n                index: this.tourService.getLastStep().index! - 1,\r\n                history: this.tourService.getHistory()\r\n            });\r\n            this.tourService.prevStep();\r\n        };\r\n    }\r\n    handleClose() {\r\n        return this.handler = () => {\r\n            if (this.tourService.getLastStep().index! + 1 === this.tourService.getLastStep()['total']) {\r\n                this.done.emit({\r\n                    tourEvent: 'done',\r\n                    index: this.tourService.getLastStep().index!,\r\n                    history: this.tourService.getHistory()\r\n                });\r\n            } else {\r\n                this.break.emit({\r\n                    tourEvent: 'break',\r\n                    index: this.tourService.getLastStep().index!,\r\n                    history: this.tourService.getHistory()\r\n                });\r\n            }\r\n            this.tourService.stopTour();\r\n        };\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport {\r\n  Ng3TourService,\r\n  Ng3TourComponent,\r\n  Ng3TourModalDirective,\r\n  Ng3TourEventDirective,\r\n  Ng3TourBackdropComponent\r\n} from '../public_api';\r\n\r\n// @dynamic\r\n@NgModule({\r\n  declarations: [\r\n    Ng3TourBackdropComponent,\r\n    Ng3TourComponent,\r\n    Ng3TourModalDirective,\r\n    Ng3TourEventDirective,\r\n  ],\r\n  entryComponents: [Ng3TourComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n  ],\r\n  exports: [\r\n    Ng3TourBackdropComponent,\r\n    Ng3TourComponent,\r\n    Ng3TourModalDirective,\r\n    Ng3TourEventDirective,\r\n  ]\r\n})\r\nexport class Ng3TourModule {\r\n  static forRoot(): ModuleWithProviders<Ng3TourModule> {\r\n    return {\r\n      ngModule: Ng3TourModule,\r\n      providers: [\r\n          Ng3TourService\r\n      ]\r\n    };\r\n  }\r\n  static forChild(): ModuleWithProviders<Ng3TourModule> {\r\n    return {\r\n        ngModule: Ng3TourModule,\r\n        providers: []\r\n    };\r\n  }\r\n}\r\n","export interface IStep { \r\n  readonly stepName: string;\r\n}\r\nexport interface ITourStep extends IStep {\r\n  route: string;\r\n  index: number;\r\n  title: string | {[propName: string]: any};\r\n  description: string | {[propName: string]: any};\r\n  backdrop: IBackdrop;\r\n  modal: IStepModal;\r\n  ctrlBtns: ICtrlBtns;\r\n  [key: string]: any\r\n}\r\n\r\nexport interface IStepProps extends IStep {\r\n  [key: string]: any\r\n}\r\n\r\nexport interface IBackdrop {\r\n  opacity: number;\r\n  targetFrameColor: string;\r\n  targetFrameSize: ITargetFrameSize;\r\n  targetFrameResize: number[];\r\n  backdropColor: string;\r\n  position: string;\r\n  isBackdrop: boolean;\r\n}\r\n\r\nexport interface ITargetFrameSize {\r\n  left: number,\r\n  right: number,\r\n  top: number,\r\n  bottom: number,\r\n  height: number,\r\n  width: number,\r\n  pageHeight: number,\r\n}\r\n\r\nexport const DefaultBackdrop: IBackdrop = {\r\n  opacity: .7,\r\n  targetFrameColor: 'transparent',\r\n  backdropColor: 'rgb(20, 60, 60)',\r\n  targetFrameSize: {top: 0, left: 0, right: 0, height: 0, width: 0, bottom: 0, pageHeight: 0},\r\n  targetFrameResize: [0],\r\n  isBackdrop: true,\r\n  position: 'absolute'\r\n}\r\n\r\nexport interface IModalPosition {\r\n  left?: string;\r\n  right?: string;\r\n  top?: string;\r\n  bottom?: string;\r\n}\r\n\r\nexport interface IModalStyles extends IModalPosition {\r\n  minWidth: string;\r\n  minHeight: string;\r\n  maxWidth: string;\r\n  maxHeight: string;\r\n  position: string;\r\n  color: string;\r\n}\r\n\r\nexport const DefaultModalStyles: IModalStyles = {\r\n  position: 'absolute',\r\n  minWidth: '250px',\r\n  minHeight: '150px',\r\n  maxWidth: '400px',\r\n  maxHeight: '600px',\r\n  color: '#121212',\r\n}\r\n\r\nexport interface IStepModal {\r\n  placement: string;\r\n  className: string;\r\n  horisontalIndent: number,\r\n  verticalIndent: number,\r\n  withoutCounter: boolean,\r\n  withoutPrev: boolean,\r\n  modalStyles: IModalStyles,\r\n  autofocus: boolean;\r\n  arrowToTarget: boolean;\r\n  modalSize: {modHeight: number, modWidth: number}\r\n  customTemplate: boolean,\r\n  delay: number,\r\n  animatedStep: boolean,\r\n  smoothScroll: boolean,\r\n  scrollTo: boolean,\r\n  closeOnClickOutside: boolean,\r\n  totalSteps: number,\r\n}\r\n\r\nexport const DefaultModal: IStepModal = {\r\n  className: '',\r\n  horisontalIndent: 50,\r\n  verticalIndent: 20,\r\n  withoutCounter: false,\r\n  withoutPrev: false,\r\n  arrowToTarget: true,\r\n  placement: 'down',\r\n  modalStyles: DefaultModalStyles,\r\n  customTemplate: false,\r\n  delay: 1000,\r\n  animatedStep: true,\r\n  smoothScroll: false,\r\n  scrollTo: true,\r\n  closeOnClickOutside: false,\r\n  autofocus: true,\r\n  modalSize: {\r\n    modHeight: 100,\r\n    modWidth: 100\r\n  },\r\n  totalSteps: 1\r\n}\r\n\r\nexport interface IStepEventProps {\r\n  tourEvent: string;\r\n  index: number;\r\n  history: number[];\r\n}\r\n\r\nexport interface ITourOptions {\r\n  tourBackdrop: IBackdrop;\r\n  tourModal: IStepModal;\r\n  tourEvents: ITourEventHandlers;\r\n  tourCtrlBtns: ICtrlBtns;\r\n}\r\n\r\nexport interface ITour extends ITourOptions{\r\n  steps: ITourStep[];\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface ITourProps {\r\n  steps: IStepProps[];\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface ICtrlBtns {\r\n  // prev?: {[propsName: string]: string} | string;\r\n  // next?: {[propsName: string]: string} | string;\r\n  // done?: {[propsName: string]: string} | string;\r\n  [propsName: string]: any;\r\n}\r\n \r\nexport interface IModalEventHandlers {\r\n  onNext($event: Event): void;\r\n  onPrev($event: Event): void;\r\n  onClose($event: Event): void;\r\n}\r\n\r\nexport interface IStepOptions {\r\n  backdropOptions?: IBackdrop;\r\n  tourModalOptions?: IStepModal;\r\n}\r\n\r\nexport interface StepSubject {\r\n  stepName: string;\r\n  delay?: number;\r\n  stepTarget?: Element;\r\n  targetSize?: Partial<ITargetFrameSize>\r\n}\r\n\r\nexport type TourEvents = 'start' | 'end' | 'break' | 'next' | 'prev'\r\n\r\nexport type TourEventHandler =  (props: {\r\n  tourEvent: TourEvents,\r\n  step?: number | string,\r\n  history?: number[],\r\n  tour?: ITourProps,\r\n}) => void;\r\n\r\nexport interface ITourEventHandlers {\r\n  tourStart: TourEventHandler;\r\n  tourEnd: TourEventHandler;\r\n  tourBreak: TourEventHandler;\r\n  next: TourEventHandler;\r\n  prev: TourEventHandler;\r\n}\r\n\r\nexport const ButtonsDefaultTranslation = {\r\n  done: {\r\n    'en-EN': 'done',\r\n    'ru-RU': 'закр',\r\n    'fr-FR': 'fini',\r\n  },\r\n  prev: {\r\n    'en-EN': 'prev',\r\n    'ru-RU': 'пред',\r\n    'fr-FR': 'préc'\r\n  },\r\n  next: {\r\n    'en-EN': 'next',\r\n    'ru-RU': 'след',\r\n    'fr-FR': 'proch',\r\n  },\r\n  of: {\r\n    'en-EN': 'of',\r\n    'fr-FR': 'de',\r\n    'ru-RU': \"из\",\r\n  }\r\n}\r\n\r\nexport const DefaultTourEventHandler: TourEventHandler = (props) => {};\r\n\r\nexport const DefaultTourEventHandlers: ITourEventHandlers = {\r\n  tourStart: DefaultTourEventHandler,\r\n  tourEnd: DefaultTourEventHandler,\r\n  tourBreak: DefaultTourEventHandler,\r\n  next: DefaultTourEventHandler,\r\n  prev: DefaultTourEventHandler,\r\n};\r\n\r\nexport const DefaultTourOptions: ITourOptions = {\r\n  tourCtrlBtns: ButtonsDefaultTranslation,\r\n  tourEvents: DefaultTourEventHandlers,\r\n  tourBackdrop: DefaultBackdrop,\r\n  tourModal: DefaultModal,\r\n}\r\n\r\nexport function setTourProps(props: Partial<ITourOptions>, defaultProps: ITourOptions = DefaultTourOptions): ITourOptions {\r\n  const ctrlBtns = {...defaultProps.tourCtrlBtns, ...props.tourCtrlBtns},\r\n  tourEvents = {...defaultProps.tourEvents, ...props.tourEvents},\r\n  backdropOptions = {...defaultProps.tourBackdrop, ...props.tourBackdrop},\r\n  tourModalOptions = {...defaultProps.tourModal, ...props.tourModal};\r\n  return {tourCtrlBtns: ctrlBtns, tourEvents, tourModal: tourModalOptions, tourBackdrop: backdropOptions};\r\n}\r\n  ","/*\r\n * Public API Surface of ng-tour\r\n */\r\n\r\nexport * from './lib/components/ng3-tour.component';\r\nexport * from './lib/components/ng3-tour-backdrop/ng3-tour-backdrop.component';\r\nexport * from './lib/services/ng3-tour.service';\r\nexport * from './lib/directives/ng3-tour-modal.directive';\r\nexport * from './lib/directives/ng3-tour-modal-events.directive';\r\nexport * from './lib/ng3-tour.module';\r\nexport * from './lib/interfaces/ng3-tour.interface';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}},"fesm2015":{"code":"import * as i0 from '@angular/core';\nimport { Component, Input, EventEmitter, isDevMode, PLATFORM_ID, ViewEncapsulation, Inject, ViewChild, Output, HostListener, Injectable, Directive, NgModule } from '@angular/core';\nimport * as i3 from '@angular/common';\nimport { isPlatformBrowser, CommonModule } from '@angular/common';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport { map, takeUntil } from 'rxjs/operators';\nimport { __rest } from 'tslib';\nimport * as i1 from '@angular/router';\nimport { RouterModule } from '@angular/router';\n\nclass Ng3TourBackdropComponent {\r\n    constructor() {\r\n    }\r\n    ngOnInit() {\r\n        // console.log(this.props.targetWindowColor)\r\n        console.error('Backdrop props: ', this.props);\r\n    }\r\n}\r\nNg3TourBackdropComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourBackdropComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\r\nNg3TourBackdropComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: Ng3TourBackdropComponent, selector: \"ng3-tour-backdrop\", inputs: { props: \"props\" }, ngImport: i0, template: \"<div\\r\\n    class=\\\"tour-step-backdrop\\\"\\r\\n    [style.height.px]=\\\"props.targetFrameSize.pageHeight\\\"\\r\\n    [style.position]=\\\"props.position\\\"\\r\\n    [style.opacity]=\\\"props.opacity\\\"\\r\\n>\\r\\n  <div class=\\\"tour-step-backdrop__container\\\" >\\r\\n    <div \\r\\n      class=\\\"tour-step-backdrop__top\\\"\\r\\n      [style.height.px]=\\\"props.targetFrameSize.top\\\"\\r\\n      [style.background]=\\\"props.backdropColor\\\"\\r\\n    ></div>\\r\\n    <div \\r\\n      class=\\\"tour-step-backdrop__middle\\\"\\r\\n      [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n    >\\r\\n      <div \\r\\n        class=\\\"tour-step-backdrop__left\\\"\\r\\n        [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n        [style.width.px]=\\\"props.targetFrameSize.left\\\"\\r\\n        [style.background]=\\\"props.backdropColor\\\"\\r\\n      ></div>\\r\\n      <div\\r\\n        class=\\\"target-window\\\"\\r\\n        [style.width.px]=\\\"props.targetFrameSize.width\\\"\\r\\n        [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n        [style.background]=\\\"props.targetFrameColor\\\"\\r\\n      >\\r\\n      </div>\\r\\n      <div\\r\\n        class=\\\"tour-step-backdrop__right\\\"\\r\\n        [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n        [style.background]=\\\"props.backdropColor\\\"\\r\\n      ></div>\\r\\n    </div>\\r\\n    <div\\r\\n      class=\\\"tour-step-backdrop__bottom\\\"\\r\\n      [style.background]=\\\"props.backdropColor\\\"\\r\\n      [style.height.px]=\\\"props.targetFrameSize.pageHeight - props.targetFrameSize.bottom\\\"\\r\\n    ></div>\\r\\n  </div>\\r\\n</div>\\r\\n\", styles: [\".tour-step-backdrop{position:absolute;top:0;left:0;width:100%;z-index:1000}.tour-step-backdrop__container{position:absolute;top:0;left:0;height:100%;width:100%}.tour-step-backdrop__container .tour-step-backdrop__bottom,.tour-step-backdrop__container .tour-step-backdrop__right,.tour-step-backdrop__container .tour-step-backdrop__top,.tour-step-backdrop__container .tour-step-backdrop__left{position:relative}.tour-step-backdrop__container .tour-step-backdrop__top{width:100%}.tour-step-backdrop__container .tour-step-backdrop__middle{width:100%;display:flex;flex-wrap:nowrap}.tour-step-backdrop__container .tour-step-backdrop__middle .tour-step-backdrop__right{width:100%}.tour-step-backdrop__container .tour-step-backdrop__middle .target-window{flex-shrink:0;background:transparent}.tour-step-backdrop__container .tour-step-backdrop__middle .tour-step-backdrop__left{flex-shrink:0}.tour-step-backdrop__container .tour-step-backdrop__bottom{width:100%;height:100%}\\n\"] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourBackdropComponent, decorators: [{\r\n            type: Component,\r\n            args: [{ selector: 'ng3-tour-backdrop', template: \"<div\\r\\n    class=\\\"tour-step-backdrop\\\"\\r\\n    [style.height.px]=\\\"props.targetFrameSize.pageHeight\\\"\\r\\n    [style.position]=\\\"props.position\\\"\\r\\n    [style.opacity]=\\\"props.opacity\\\"\\r\\n>\\r\\n  <div class=\\\"tour-step-backdrop__container\\\" >\\r\\n    <div \\r\\n      class=\\\"tour-step-backdrop__top\\\"\\r\\n      [style.height.px]=\\\"props.targetFrameSize.top\\\"\\r\\n      [style.background]=\\\"props.backdropColor\\\"\\r\\n    ></div>\\r\\n    <div \\r\\n      class=\\\"tour-step-backdrop__middle\\\"\\r\\n      [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n    >\\r\\n      <div \\r\\n        class=\\\"tour-step-backdrop__left\\\"\\r\\n        [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n        [style.width.px]=\\\"props.targetFrameSize.left\\\"\\r\\n        [style.background]=\\\"props.backdropColor\\\"\\r\\n      ></div>\\r\\n      <div\\r\\n        class=\\\"target-window\\\"\\r\\n        [style.width.px]=\\\"props.targetFrameSize.width\\\"\\r\\n        [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n        [style.background]=\\\"props.targetFrameColor\\\"\\r\\n      >\\r\\n      </div>\\r\\n      <div\\r\\n        class=\\\"tour-step-backdrop__right\\\"\\r\\n        [style.height.px]=\\\"props.targetFrameSize.height\\\"\\r\\n        [style.background]=\\\"props.backdropColor\\\"\\r\\n      ></div>\\r\\n    </div>\\r\\n    <div\\r\\n      class=\\\"tour-step-backdrop__bottom\\\"\\r\\n      [style.background]=\\\"props.backdropColor\\\"\\r\\n      [style.height.px]=\\\"props.targetFrameSize.pageHeight - props.targetFrameSize.bottom\\\"\\r\\n    ></div>\\r\\n  </div>\\r\\n</div>\\r\\n\", styles: [\".tour-step-backdrop{position:absolute;top:0;left:0;width:100%;z-index:1000}.tour-step-backdrop__container{position:absolute;top:0;left:0;height:100%;width:100%}.tour-step-backdrop__container .tour-step-backdrop__bottom,.tour-step-backdrop__container .tour-step-backdrop__right,.tour-step-backdrop__container .tour-step-backdrop__top,.tour-step-backdrop__container .tour-step-backdrop__left{position:relative}.tour-step-backdrop__container .tour-step-backdrop__top{width:100%}.tour-step-backdrop__container .tour-step-backdrop__middle{width:100%;display:flex;flex-wrap:nowrap}.tour-step-backdrop__container .tour-step-backdrop__middle .tour-step-backdrop__right{width:100%}.tour-step-backdrop__container .tour-step-backdrop__middle .target-window{flex-shrink:0;background:transparent}.tour-step-backdrop__container .tour-step-backdrop__middle .tour-step-backdrop__left{flex-shrink:0}.tour-step-backdrop__container .tour-step-backdrop__bottom{width:100%;height:100%}\\n\"] }]\r\n        }], ctorParameters: function () { return []; }, propDecorators: { props: [{\r\n                type: Input,\r\n                args: ['props']\r\n            }] } });\n\n// @dynamic\r\nclass Ng3TourComponent {\r\n    constructor(tourService, \r\n    // @dynamic\r\n    platformId) {\r\n        this.tourService = tourService;\r\n        this.currentTarget = null;\r\n        this.currentStep = null;\r\n        this.stepTarget$ = null;\r\n        this.currentStep$ = new BehaviorSubject(this.currentStep);\r\n        this.modalElement = null;\r\n        this.timeoutForCulc = 100;\r\n        this.onDestroy = new Subject();\r\n        this.timeouts = [];\r\n        this.next = new EventEmitter();\r\n        this.prev = new EventEmitter();\r\n        this.done = new EventEmitter();\r\n        this.break = new EventEmitter();\r\n        this.isBrowser = isPlatformBrowser(platformId);\r\n        console.log('construct');\r\n    }\r\n    clickOutsideToClose($Event) {\r\n        if (this.currentStep) {\r\n            if (this.currentStep.modal.closeOnClickOutside && !this.modal.nativeElement.contains($Event.target)) {\r\n                this.onClose($Event);\r\n            }\r\n        }\r\n    }\r\n    onResize(event) {\r\n        if (this.currentStep) {\r\n            this.culcTargetSize(this.currentTarget);\r\n            this.getModal();\r\n        }\r\n    }\r\n    ngOnInit() {\r\n        console.log('sdfsf');\r\n        if (!this.isBrowser) {\r\n            return;\r\n        }\r\n        this.stepTarget$ = this.tourService.getStepTargetStream().pipe(map((step) => {\r\n            console.log('step: ', step);\r\n            if ((step === null || step === void 0 ? void 0 : step.stepTarget) && this.tourService.getTourStatus()) {\r\n                this.currentTarget = step.stepTarget;\r\n                this.currentStep = this.tourService.getStepByName(step.stepName);\r\n                if (isDevMode()) {\r\n                    console.log('currentStep in component: ', this.currentStep, this.modal.nativeElement);\r\n                }\r\n                this.culcTargetSize(step.stepTarget);\r\n                this.resetClasses();\r\n                this.currentStep.backdrop.targetFrameColor = 'transparent';\r\n                this.currentStep$.next(this.currentStep);\r\n                this.getModal();\r\n            }\r\n            else {\r\n                this.currentStep = null;\r\n            }\r\n            return step;\r\n        }));\r\n        this.tourService.getStepsStream().pipe(takeUntil(this.onDestroy), map((step) => {\r\n            this.currentStep = null;\r\n            if (step) {\r\n                this.resetClasses();\r\n            }\r\n            return step;\r\n        })).subscribe();\r\n        console.log('after init: ', this.currentStep, this.modal.nativeElement);\r\n    }\r\n    ngOnDestroy() {\r\n        this.onDestroy.next(null);\r\n        this.timeouts.forEach(i => clearTimeout(i));\r\n    }\r\n    resetClasses() {\r\n        const step = this.currentStep;\r\n        const props = (step === null || step === void 0 ? void 0 : step.modal) || this.tourService.getLastStep().modal;\r\n        const { animatedStep, arrowToTarget, placement, className } = props;\r\n        const arrow = arrowToTarget ? 'with-arrow' : '';\r\n        if (step) {\r\n            const animation = animatedStep ? 'animation-on' : '';\r\n            this.className = `${arrow} pos-${placement} ${animation} ${step.stepName} ${className}`.trim();\r\n        }\r\n        else {\r\n            const animation = 'fade-on';\r\n            this.className = `${arrow} pos-${placement} ${animation} ${className}`.trim();\r\n        }\r\n    }\r\n    culcTargetSize(target) {\r\n        var _a;\r\n        const size = this.tourService.getSizeAndPosition(target);\r\n        const resize = (_a = this.currentStep.backdrop) === null || _a === void 0 ? void 0 : _a.targetFrameResize;\r\n        this.currentStep.backdrop.targetFrameSize = resize\r\n            ? this.tourService.resizeTarget(size, resize)\r\n            : size;\r\n    }\r\n    defineStepPlacementToWindow(placement) {\r\n        var _a, _b;\r\n        const modalSize = (_a = this.currentStep.modal) === null || _a === void 0 ? void 0 : _a.modalSize;\r\n        if (!modalSize || !this.currentStep.modal)\r\n            return;\r\n        this.currentStep.modal.modalStyles = ((_b = this.currentStep.modal) === null || _b === void 0 ? void 0 : _b.modalStyles) || {};\r\n        const { modHeight, modWidth } = modalSize;\r\n        const HI = this.currentStep['modalProps'].horisontalIndent;\r\n        if (/^right-center$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.right = `${HI}px`;\r\n            this.currentStep.modal.modalStyles.top = `${Math.round(window.innerHeight / 2 - modHeight / 2)}px`;\r\n        }\r\n        else if (/^left-center$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.left = `${HI}px`;\r\n            this.currentStep.modal.modalStyles.top = `${Math.round(window.innerHeight / 2 - modHeight / 2)}px`;\r\n        }\r\n        else if (/^center$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.left = `${Math.round(window.innerWidth / 2 - modWidth / 2)}px`;\r\n            this.currentStep.modal.modalStyles.top = `${Math.round(window.innerHeight / 2 - modHeight / 2)}px`;\r\n        }\r\n    }\r\n    getModal(attempts = 3) {\r\n        this.modalElement = this.modal.nativeElement.querySelector('.tour-step-modal');\r\n        if (!this.modalElement && attempts > 0) {\r\n            console.error(attempts, this.modalElement, this.currentStep, this.modal.nativeElement.querySelector('.tour-step-wrapper'));\r\n            attempts -= 1;\r\n            this.timeouts[this.timeouts.length] = setTimeout(() => this.getModal(attempts), this.timeoutForCulc);\r\n            return this.timeouts;\r\n        }\r\n        return this.defineModalPlacementToTarget();\r\n    }\r\n    defineModalPlacementToTarget(modal = this.modalElement) {\r\n        if (!this.currentStep.modal || !this.currentStep.backdrop || !modal) {\r\n            console.error('no current step modal options', this.currentStep, this.modalElement);\r\n            return;\r\n        }\r\n        const modalRect = modal.getBoundingClientRect();\r\n        const modHeight = Math.round(modalRect.height ? modalRect.height : modalRect.bottom - modalRect.top);\r\n        const modWidth = Math.round(modalRect.width ? modalRect.width : modalRect.right - modalRect.left);\r\n        this.currentStep.modal.modalSize = { modWidth, modHeight };\r\n        const { placement, scrollTo } = this.currentStep.modal;\r\n        const { top = 0, bottom = 0, width = 0, left = 0, right = 0 } = this.currentStep.backdrop.targetFrameSize;\r\n        // console.error(modalRect, this.backdropOptions);\r\n        if (!placement) {\r\n            console.error('no placement');\r\n            return;\r\n        }\r\n        this.currentStep.modal.modalStyles = this.currentStep.modal.modalStyles || {};\r\n        const VI = this.currentStep.modal.verticalIndent || 0;\r\n        const HI = this.currentStep.modal.horisontalIndent || 0;\r\n        if (/^down$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.top = `${bottom + VI}px`;\r\n            this.currentStep.modal.modalStyles.left = `${Math.round(left - modWidth / 2)}px`;\r\n        }\r\n        else if (/^top$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.top = `${top - modHeight - VI}px`;\r\n            this.currentStep.modal.modalStyles.left = `${Math.round(left - modWidth / 2)}px`;\r\n        }\r\n        else if (/^left$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.top = `${top}px`;\r\n            this.currentStep.modal.modalStyles.left = `${left - modWidth - VI}px`;\r\n        }\r\n        else if (/^right$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.top = `${top}px`;\r\n            this.currentStep.modal.modalStyles.left = `${right + width + VI}px`;\r\n        }\r\n        else if (/^left-top$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.top = `${top - modHeight + HI}px`;\r\n            this.currentStep.modal.modalStyles.left = `${left - width - VI}px`;\r\n        }\r\n        else if (/^right-top$/i.test(placement)) {\r\n            this.currentStep.modal.modalStyles.top = `${top - modHeight + HI}px`;\r\n            this.currentStep.modal.modalStyles.left = `${right + width + VI}px`;\r\n        }\r\n        else {\r\n            this.defineStepPlacementToWindow(placement);\r\n        }\r\n        if (this.currentStep.modal.autofocus && modal) {\r\n            this.setFocus(modal);\r\n        }\r\n        if (scrollTo) {\r\n            this.scrollTo();\r\n        }\r\n        this.currentStep$.next(this.currentStep);\r\n        setTimeout(() => {\r\n            console.error('ModalStyles', this.currentTarget.getBoundingClientRect(), this.currentStep.backdrop.targetFrameSize);\r\n        }, 10);\r\n    }\r\n    setFocus(modal) {\r\n        const nextBtn = modal.querySelector('.tour-btn-next');\r\n        const endBtn = modal.querySelector('.tour-btn-done');\r\n        if (nextBtn) {\r\n            nextBtn.focus();\r\n        }\r\n        else if (endBtn) {\r\n            endBtn.focus();\r\n        }\r\n    }\r\n    scrollTo() {\r\n        if (!this.currentStep.modal || !this.currentStep.backdrop) {\r\n            console.error('no current step modal options');\r\n            return;\r\n        }\r\n        const { placement, modalStyles } = this.currentStep.modal;\r\n        const { position } = modalStyles;\r\n        const { left = 0, top = 0, bottom = 0 } = this.currentStep.backdrop.targetFrameSize;\r\n        const HI = this.currentStep.modal.horisontalIndent;\r\n        const Top = placement !== 'top' ? top - 2 * HI : top - bottom - HI;\r\n        const behavior = this.currentStep.modal.smoothScroll ? 'smooth' : 'auto';\r\n        if (position === 'absolute') {\r\n            document.documentElement.scroll({ top: Top, left, behavior });\r\n        }\r\n        else {\r\n            document.documentElement.scroll({ top: 0, left: 0, behavior });\r\n        }\r\n    }\r\n    onNext(event) {\r\n        this.next.emit({\r\n            stepEvent: 'next',\r\n            index: this.currentStep.index + 1,\r\n            history: this.tourService.getHistory(),\r\n        });\r\n        this.tourService.nextStep();\r\n    }\r\n    onPrev(event) {\r\n        this.prev.emit({\r\n            stepEvent: 'prev',\r\n            index: this.currentStep.index - 1,\r\n            history: this.tourService.getHistory(),\r\n        });\r\n        this.tourService.prevStep();\r\n    }\r\n    onClose(event) {\r\n        if (this.currentStep.index !== this.currentStep['total'] - 1) {\r\n            this.break.emit({\r\n                stepEvent: 'break',\r\n                index: this.currentStep.index,\r\n                history: this.tourService.getHistory(),\r\n            });\r\n        }\r\n        else {\r\n            this.done.emit({\r\n                stepEvent: 'done',\r\n                index: this.currentStep.index,\r\n                history: this.tourService.getHistory(),\r\n            });\r\n        }\r\n        this.tourService.stopTour();\r\n    }\r\n}\r\nNg3TourComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourComponent, deps: [{ token: Ng3TourService }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Component });\r\nNg3TourComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.1\", type: Ng3TourComponent, selector: \"ng3-tour-template\", outputs: { next: \"next\", prev: \"prev\", done: \"done\", break: \"break\" }, host: { listeners: { \"document:click\": \"clickOutsideToClose($event)\", \"window:resize\": \"onResize($event)\" } }, viewQueries: [{ propertyName: \"modal\", first: true, predicate: [\"modal\"], descendants: true }], exportAs: [\"tour\"], ngImport: i0, template: \"<div class=\\\"tour-step-wrapper\\\" *ngIf=\\\"stepTarget$ | async\\\" [ngClass]=\\\"className\\\" #modal>\\r\\n  <ng3-tour-backdrop\\r\\n    *ngIf=\\\"currentStep && currentStep.backdrop.isBackdrop\\\"\\r\\n    [props]=\\\"currentStep.backdrop\\\"\\r\\n  >\\r\\n  </ng3-tour-backdrop>\\r\\n  <div\\r\\n    *ngIf=\\\"currentStep\\\"\\r\\n    [ngClass]=\\\"currentStep.modal.className\\\"\\r\\n    class=\\\"tour-step-modal\\\"\\r\\n    [ngStyle]=\\\"currentStep.modal.modalStyles\\\"\\r\\n  > \\r\\n    <div *ngIf=\\\"!currentStep.modal.customTemplate\\\" class=\\\"tour-step-modal__content\\\">\\r\\n      <div class=\\\"tour-step-modal__header\\\">\\r\\n        <h3 class=\\\"tour-step-modal__title\\\">\\r\\n          {{currentStep.title}}\\r\\n        </h3>\\r\\n        <button class=\\\"tour-btn-close\\\" type=\\\"button\\\" (click)=\\\"onClose($event)\\\">\\r\\n          &times;\\r\\n        </button>\\r\\n      </div>\\r\\n      <div class=\\\"tour-step-modal__body\\\">\\r\\n        <p class=\\\"tour-step-modal__description\\\">\\r\\n          {{currentStep.description}}\\r\\n        </p>\\r\\n      </div>\\r\\n      <div class=\\\"tour-step-modal__footer\\\">\\r\\n        <div *ngIf=\\\"!currentStep.modal.withoutCounter\\\" class=\\\"tour-step-modal__counter\\\">\\r\\n          {{currentStep.index + 1}} {{currentStep.ctrlBtns['of']}} {{currentStep['total']}}\\r\\n        </div>\\r\\n        <button\\r\\n          *ngIf=\\\"!currentStep.modal.withoutPrev && currentStep.index\\\" \\r\\n          type=\\\"button\\\" \\r\\n          class=\\\"tour-btn tour-btn-prev\\\"\\r\\n          (click)=\\\"onPrev($event)\\\"\\r\\n        >\\r\\n          {{currentStep.ctrlBtns['prev']}}\\r\\n        </button>\\r\\n        <button\\r\\n          *ngIf=\\\"currentStep.index + 1 !== currentStep['total']\\\"\\r\\n          type=\\\"button\\\"\\r\\n          class=\\\"tour-btn tour-btn-next\\\"\\r\\n          (click)=\\\"onNext($event)\\\"          \\r\\n        >\\r\\n          {{currentStep.ctrlBtns['next']}}\\r\\n        </button>\\r\\n        <button\\r\\n          *ngIf=\\\"currentStep.index + 1 === currentStep['total']\\\"\\r\\n          type=\\\"button\\\"\\r\\n          class=\\\"tour-btn tour-btn-done\\\"\\r\\n          (click)=\\\"onClose($event)\\\"\\r\\n        >\\r\\n          {{currentStep.ctrlBtns['done']}}\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n      <div #content *ngIf=\\\"currentStep.modal.customTemplate\\\" class=\\\"content\\\">\\r\\n        <ng-content></ng-content>\\r\\n      </div>\\r\\n  </div>\\r\\n</div>\\r\\n<!-- *ngIf=\\\"currentStep as step\\\" -->\", styles: [\".tour-step-wrapper.fade-on .tour-step-modal{opacity:0}.tour-step-wrapper:not(.animation-on) .tour-step-modal{animation:fade .4s ease-in-out}.tour-step-wrapper.pos-down.animation-on .tour-step-modal{animation:stepDown .4s ease-in-out}.tour-step-wrapper.pos-down.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-bottom:.4rem solid white;border-left:.4rem solid transparent;border-right:.4rem solid transparent;top:-.4rem;right:45%}.tour-step-wrapper.pos-top.animation-on .tour-step-modal{animation:stepTop .4s ease-in-out}.tour-step-wrapper.pos-top.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-top:.4rem solid white;border-left:.4rem solid transparent;border-right:.4rem solid transparent;bottom:-.4rem;right:45%}.tour-step-wrapper.pos-left.animation-on .tour-step-modal{animation:stepLeft .4s ease-in-out}.tour-step-wrapper.pos-left.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-left:.4rem solid white;border-top:.4rem solid transparent;border-bottom:.4rem solid transparent;right:-.4rem;top:1rem}.tour-step-wrapper.pos-right.animation-on .tour-step-modal{animation:stepRight .4s ease-in-out}.tour-step-wrapper.pos-right.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-right:.4rem solid white;border-top:.4rem solid transparent;border-bottom:.4rem solid transparent;left:-.4rem;top:1rem}.tour-step-wrapper.pos-center.animation-on .tour-step-modal{animation:fade .4s ease-in-out}.tour-step-modal{background:white;border-radius:4px;box-shadow:0 0 12px 4px #0000008c;z-index:1100}.tour-step-modal__content{padding:.8rem;box-sizing:border-box}.tour-step-modal__header{width:100%;display:flex;justify-content:space-between}.tour-step-modal__title{font-weight:500;font-size:22px}.tour-step-modal__body{padding:1rem 0;min-height:50px;flex-grow:2}.tour-step-modal__description{line-height:24px}.tour-step-modal .tour-btn-close{background:transparent;border:none;color:#a9a9a9;font-size:1.6rem;margin:-5px -5px 0 0;cursor:pointer}.tour-step-modal .tour-btn-close:hover{color:var(--pale-grey)}.tour-step-modal__footer{padding:1px 0;display:flex;justify-content:space-between;align-items:center;justify-self:end;width:100%}.tour-btn{color:#2f2f2f;width:auto;height:auto;border-radius:4px;background:transparent;color:gray;cursor:pointer;padding:8px 16px;box-shadow:0 0 2px 2px #0000003d,inset 0 1px 3px #00000029;border:solid 1px grey;transition:all .3s}.tour-btn:hover,.tour-btn:focus{border-color:#737373;box-shadow:1px 1px 2px 1px #00000057;outline:none}@keyframes fade{0%{opacity:0}to{opacity:1}}@keyframes stepDown{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes stepLeft{0%{transform:translate(-30px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes stepRight{0%{transform:translate(30px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes stepTop{0%{transform:translateY(-30px);opacity:0}to{transform:translateY(0);opacity:1}}\\n\"], components: [{ type: Ng3TourBackdropComponent, selector: \"ng3-tour-backdrop\", inputs: [\"props\"] }], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { type: i3.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }], pipes: { \"async\": i3.AsyncPipe }, encapsulation: i0.ViewEncapsulation.None });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourComponent, decorators: [{\r\n            type: Component,\r\n            args: [{ selector: 'ng3-tour-template', encapsulation: ViewEncapsulation.None, exportAs: 'tour', template: \"<div class=\\\"tour-step-wrapper\\\" *ngIf=\\\"stepTarget$ | async\\\" [ngClass]=\\\"className\\\" #modal>\\r\\n  <ng3-tour-backdrop\\r\\n    *ngIf=\\\"currentStep && currentStep.backdrop.isBackdrop\\\"\\r\\n    [props]=\\\"currentStep.backdrop\\\"\\r\\n  >\\r\\n  </ng3-tour-backdrop>\\r\\n  <div\\r\\n    *ngIf=\\\"currentStep\\\"\\r\\n    [ngClass]=\\\"currentStep.modal.className\\\"\\r\\n    class=\\\"tour-step-modal\\\"\\r\\n    [ngStyle]=\\\"currentStep.modal.modalStyles\\\"\\r\\n  > \\r\\n    <div *ngIf=\\\"!currentStep.modal.customTemplate\\\" class=\\\"tour-step-modal__content\\\">\\r\\n      <div class=\\\"tour-step-modal__header\\\">\\r\\n        <h3 class=\\\"tour-step-modal__title\\\">\\r\\n          {{currentStep.title}}\\r\\n        </h3>\\r\\n        <button class=\\\"tour-btn-close\\\" type=\\\"button\\\" (click)=\\\"onClose($event)\\\">\\r\\n          &times;\\r\\n        </button>\\r\\n      </div>\\r\\n      <div class=\\\"tour-step-modal__body\\\">\\r\\n        <p class=\\\"tour-step-modal__description\\\">\\r\\n          {{currentStep.description}}\\r\\n        </p>\\r\\n      </div>\\r\\n      <div class=\\\"tour-step-modal__footer\\\">\\r\\n        <div *ngIf=\\\"!currentStep.modal.withoutCounter\\\" class=\\\"tour-step-modal__counter\\\">\\r\\n          {{currentStep.index + 1}} {{currentStep.ctrlBtns['of']}} {{currentStep['total']}}\\r\\n        </div>\\r\\n        <button\\r\\n          *ngIf=\\\"!currentStep.modal.withoutPrev && currentStep.index\\\" \\r\\n          type=\\\"button\\\" \\r\\n          class=\\\"tour-btn tour-btn-prev\\\"\\r\\n          (click)=\\\"onPrev($event)\\\"\\r\\n        >\\r\\n          {{currentStep.ctrlBtns['prev']}}\\r\\n        </button>\\r\\n        <button\\r\\n          *ngIf=\\\"currentStep.index + 1 !== currentStep['total']\\\"\\r\\n          type=\\\"button\\\"\\r\\n          class=\\\"tour-btn tour-btn-next\\\"\\r\\n          (click)=\\\"onNext($event)\\\"          \\r\\n        >\\r\\n          {{currentStep.ctrlBtns['next']}}\\r\\n        </button>\\r\\n        <button\\r\\n          *ngIf=\\\"currentStep.index + 1 === currentStep['total']\\\"\\r\\n          type=\\\"button\\\"\\r\\n          class=\\\"tour-btn tour-btn-done\\\"\\r\\n          (click)=\\\"onClose($event)\\\"\\r\\n        >\\r\\n          {{currentStep.ctrlBtns['done']}}\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n      <div #content *ngIf=\\\"currentStep.modal.customTemplate\\\" class=\\\"content\\\">\\r\\n        <ng-content></ng-content>\\r\\n      </div>\\r\\n  </div>\\r\\n</div>\\r\\n<!-- *ngIf=\\\"currentStep as step\\\" -->\", styles: [\".tour-step-wrapper.fade-on .tour-step-modal{opacity:0}.tour-step-wrapper:not(.animation-on) .tour-step-modal{animation:fade .4s ease-in-out}.tour-step-wrapper.pos-down.animation-on .tour-step-modal{animation:stepDown .4s ease-in-out}.tour-step-wrapper.pos-down.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-bottom:.4rem solid white;border-left:.4rem solid transparent;border-right:.4rem solid transparent;top:-.4rem;right:45%}.tour-step-wrapper.pos-top.animation-on .tour-step-modal{animation:stepTop .4s ease-in-out}.tour-step-wrapper.pos-top.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-top:.4rem solid white;border-left:.4rem solid transparent;border-right:.4rem solid transparent;bottom:-.4rem;right:45%}.tour-step-wrapper.pos-left.animation-on .tour-step-modal{animation:stepLeft .4s ease-in-out}.tour-step-wrapper.pos-left.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-left:.4rem solid white;border-top:.4rem solid transparent;border-bottom:.4rem solid transparent;right:-.4rem;top:1rem}.tour-step-wrapper.pos-right.animation-on .tour-step-modal{animation:stepRight .4s ease-in-out}.tour-step-wrapper.pos-right.with-arrow .tour-step-modal:after{content:\\\"\\\";width:0;height:0;position:absolute;border-right:.4rem solid white;border-top:.4rem solid transparent;border-bottom:.4rem solid transparent;left:-.4rem;top:1rem}.tour-step-wrapper.pos-center.animation-on .tour-step-modal{animation:fade .4s ease-in-out}.tour-step-modal{background:white;border-radius:4px;box-shadow:0 0 12px 4px #0000008c;z-index:1100}.tour-step-modal__content{padding:.8rem;box-sizing:border-box}.tour-step-modal__header{width:100%;display:flex;justify-content:space-between}.tour-step-modal__title{font-weight:500;font-size:22px}.tour-step-modal__body{padding:1rem 0;min-height:50px;flex-grow:2}.tour-step-modal__description{line-height:24px}.tour-step-modal .tour-btn-close{background:transparent;border:none;color:#a9a9a9;font-size:1.6rem;margin:-5px -5px 0 0;cursor:pointer}.tour-step-modal .tour-btn-close:hover{color:var(--pale-grey)}.tour-step-modal__footer{padding:1px 0;display:flex;justify-content:space-between;align-items:center;justify-self:end;width:100%}.tour-btn{color:#2f2f2f;width:auto;height:auto;border-radius:4px;background:transparent;color:gray;cursor:pointer;padding:8px 16px;box-shadow:0 0 2px 2px #0000003d,inset 0 1px 3px #00000029;border:solid 1px grey;transition:all .3s}.tour-btn:hover,.tour-btn:focus{border-color:#737373;box-shadow:1px 1px 2px 1px #00000057;outline:none}@keyframes fade{0%{opacity:0}to{opacity:1}}@keyframes stepDown{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes stepLeft{0%{transform:translate(-30px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes stepRight{0%{transform:translate(30px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes stepTop{0%{transform:translateY(-30px);opacity:0}to{transform:translateY(0);opacity:1}}\\n\"] }]\r\n        }], ctorParameters: function () {\r\n        return [{ type: Ng3TourService }, { type: undefined, decorators: [{\r\n                        type: Inject,\r\n                        args: [PLATFORM_ID]\r\n                    }] }];\r\n    }, propDecorators: { modal: [{\r\n                type: ViewChild,\r\n                args: ['modal']\r\n            }], next: [{\r\n                type: Output\r\n            }], prev: [{\r\n                type: Output\r\n            }], done: [{\r\n                type: Output\r\n            }], break: [{\r\n                type: Output\r\n            }], clickOutsideToClose: [{\r\n                type: HostListener,\r\n                args: ['document:click', ['$event']]\r\n            }], onResize: [{\r\n                type: HostListener,\r\n                args: ['window:resize', ['$event']]\r\n            }] } });\n\n// @dynamic\r\nclass Ng3TourService {\r\n    constructor(router, \r\n    // @dynamic\r\n    platformId) {\r\n        this.router = router;\r\n        this.tourStarted = false;\r\n        this.stepsStream$ = new BehaviorSubject(null);\r\n        this.stepTargetStream$ = new BehaviorSubject(null);\r\n        this.history = [];\r\n        this.routeChanged = false;\r\n        this.tourBreak = DefaultTourEventHandler;\r\n        this.tourEnd = DefaultTourEventHandler;\r\n        this.next = DefaultTourEventHandler;\r\n        this.prev = DefaultTourEventHandler;\r\n        this.nextStep = this.nextStep.bind(this);\r\n        this.prevStep = this.prevStep.bind(this);\r\n        this.stopTour = this.stopTour.bind(this);\r\n        this.getLang = this.getLang.bind(this);\r\n        this.isBrowser = isPlatformBrowser(platformId);\r\n        this.lang = this.isBrowser ? navigator.language : '';\r\n    }\r\n    validateOptions(tour) {\r\n        var _a, _b, _c;\r\n        const regExpr = /^top$|^down$|^left$|^right$|^center$|^right-center$|^left-center$|^right-top$|^left-top$/i;\r\n        tour.steps.forEach((step, i) => {\r\n            var _a, _b, _c;\r\n            if (((_a = step['modal']) === null || _a === void 0 ? void 0 : _a.placement) && !regExpr.test((_b = step['modal']) === null || _b === void 0 ? void 0 : _b.placement)) {\r\n                throw Error(`Placement option of the step ${i} of the ng3-tour is invalid ${(_c = step['modal']) === null || _c === void 0 ? void 0 : _c.placement}`);\r\n            }\r\n        });\r\n        if (((_a = tour['tourModal']) === null || _a === void 0 ? void 0 : _a.placement) && !regExpr.test((_b = tour['tourModal']) === null || _b === void 0 ? void 0 : _b.placement)) {\r\n            throw Error(`Placement option of the ng3-tour is invalid ${(_c = tour['tourModal']) === null || _c === void 0 ? void 0 : _c.placement}`);\r\n        }\r\n    }\r\n    setSteps(tour) {\r\n        const { steps } = tour, restProps = __rest(tour, [\"steps\"]);\r\n        const tourOptions = setTourProps(restProps);\r\n        this.steps = Object.assign({}, tour).steps.map((step, i) => {\r\n            step['index'] = i;\r\n            step['total'] = steps.length;\r\n            if (step['description'] && typeof step['description'] === 'object') {\r\n                step['description'] = this.defineLocalName(step['description']);\r\n            }\r\n            if (step['title'] && typeof step['title'] === 'object') {\r\n                step['title'] = this.defineLocalName(step['title']);\r\n            }\r\n            step['backdrop'] = Object.assign(Object.assign({}, tourOptions.tourBackdrop), step['backdrop']);\r\n            let _a = step['modal'] || {}, { modalStyles } = _a, restProps = __rest(_a, [\"modalStyles\"]);\r\n            modalStyles = Object.assign(Object.assign({}, tourOptions.tourModal.modalStyles), modalStyles);\r\n            step['modal'] = Object.assign(Object.assign(Object.assign({}, tourOptions.tourModal), restProps), { modalStyles });\r\n            step['ctrlBtns'] = this.defineBtnsNames(tour['tourCtrlBtns'] || ButtonsDefaultTranslation);\r\n            return step;\r\n        });\r\n        if (isDevMode()) {\r\n            console.log('Development mode: ', isDevMode());\r\n            console.log('ng3-tour is initiated with steps:');\r\n            console.log(this.steps);\r\n        }\r\n    }\r\n    defineLocalName(obj) {\r\n        let result;\r\n        if (!this.isBrowser) {\r\n            return '';\r\n        }\r\n        if (obj.hasOwnProperty(this.lang)) {\r\n            result = obj[this.lang];\r\n        }\r\n        else {\r\n            const setLanguages = Object.keys(obj);\r\n            const ralatedLang = setLanguages.filter(l => l.includes(this.lang.slice(0, 2)))[0];\r\n            if (ralatedLang) {\r\n                result = obj[ralatedLang];\r\n            }\r\n            else {\r\n                result = obj[setLanguages[0]];\r\n            }\r\n        }\r\n        if (typeof result === 'string') {\r\n            return result;\r\n        }\r\n        console.error(`Tour configuration error with ${JSON.stringify(obj)}`);\r\n        return 'Error';\r\n    }\r\n    defineBtnsNames(btns) {\r\n        const btnCtrls = {};\r\n        for (let prop in btns) {\r\n            if (btns.hasOwnProperty(prop)) {\r\n                let result;\r\n                if (typeof btns[prop] === 'string') {\r\n                    result = btns[prop];\r\n                }\r\n                else if (typeof btns[prop] === 'object' && btns[prop][this.lang] === 'string') {\r\n                    result = btns[prop][this.lang];\r\n                }\r\n                else {\r\n                    const setOfLanguages = Object.keys(btns[prop]);\r\n                    const ralatedLang = setOfLanguages.filter(l => l.includes(this.lang.slice(0, 2)))[0];\r\n                    if (ralatedLang) {\r\n                        result = btns[prop][ralatedLang];\r\n                    }\r\n                    else {\r\n                        result = btns[prop][setOfLanguages[0]];\r\n                    }\r\n                    if (typeof result === 'string') {\r\n                        btnCtrls[prop] = result;\r\n                    }\r\n                    else if (this.isBrowser) {\r\n                        console.error(`Tour configuration error with ${JSON.stringify(btns)}`);\r\n                        btnCtrls[prop] = 'Error';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return btnCtrls;\r\n    }\r\n    initStep(step) {\r\n        // console.log(step, this.history)\r\n        const previousStep = this.history.length ? this.getLastStep() : { route: null };\r\n        const newStep = this.steps[step];\r\n        this.routeChanged = previousStep.route !== newStep.route;\r\n        this.history.push(step);\r\n        if (newStep.route && this.routeChanged) {\r\n            this.router.navigate([newStep.route]);\r\n        }\r\n        const delay = newStep.modal.delay;\r\n        this.stepsStream$.next({ stepName: newStep.stepName, delay });\r\n    }\r\n    getLang() {\r\n        return this.lang;\r\n    }\r\n    getHistory() {\r\n        return this.history;\r\n    }\r\n    getStepsLength() {\r\n        return this.steps.length;\r\n    }\r\n    resetStep(stepName, step) {\r\n        const index = typeof stepName === 'number' ? stepName : this.getStepByName(stepName).index;\r\n        this.steps[index] = Object.assign({}, step);\r\n    }\r\n    getStepByName(stepName) {\r\n        return this.steps.filter(step => step.stepName === stepName)[0];\r\n    }\r\n    getStepByIndex(index = 0) {\r\n        return this.steps[index];\r\n    }\r\n    getLastStep() {\r\n        if (this.history.length)\r\n            return this.steps[this.history.slice(-1)[0]];\r\n        return null;\r\n    }\r\n    getStepsStream() {\r\n        return this.stepsStream$;\r\n    }\r\n    getStepTargetStream() {\r\n        return this.stepTargetStream$;\r\n    }\r\n    isRouteChanged() {\r\n        return this.routeChanged;\r\n    }\r\n    setTourStatus(status) {\r\n        this.tourStarted = status;\r\n    }\r\n    getTourStatus() {\r\n        return this.tourStarted;\r\n    }\r\n    startTour(tour) {\r\n        this.validateOptions(tour);\r\n        const tourEvantHendlers = Object.assign(Object.assign({}, DefaultTourEventHandlers), tour['tourEvents']);\r\n        const { tourBreak, tourStart, tourEnd, next, prev } = tourEvantHendlers;\r\n        tourStart({ tourEvent: 'start', tour });\r\n        this.tourBreak = tourBreak;\r\n        this.tourEnd = tourEnd;\r\n        this.next = next;\r\n        this.prev = prev;\r\n        this.setSteps(tour);\r\n        this.initStep(0);\r\n        this.setTourStatus(true);\r\n    }\r\n    stopTour() {\r\n        const index = this.getLastStep().index;\r\n        const latestStepIndex = this.steps.length - 1;\r\n        if (index < latestStepIndex) {\r\n            this.tourBreak({ tourEvent: 'break', step: index, history: this.history });\r\n        }\r\n        else if (latestStepIndex === index) {\r\n            this.tourEnd({ tourEvent: 'end', step: index, history: this.history });\r\n        }\r\n        this.setTourStatus(false);\r\n        this.stepTargetStream$.next(null);\r\n        this.stepsStream$.next(null);\r\n        this.steps.length = 0;\r\n        this.history.length = 0;\r\n    }\r\n    nextStep() {\r\n        const step = this.getLastStep().index + 1;\r\n        this.next({ tourEvent: 'next', step, history: this.history });\r\n        this.initStep(step);\r\n    }\r\n    prevStep() {\r\n        const step = this.getLastStep().index - 1;\r\n        this.prev({ tourEvent: 'prev', step, history: this.history });\r\n        this.initStep(step);\r\n    }\r\n    maxHeight() {\r\n        return Math.round(Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight, window.innerHeight));\r\n    }\r\n    getSizeAndPosition(el) {\r\n        const targetRect = el.getBoundingClientRect();\r\n        if (isDevMode() && (!targetRect || !el)) {\r\n            console.error(el, targetRect);\r\n        }\r\n        const bodyRect = document.body.getBoundingClientRect();\r\n        const top = Math.round(targetRect.top - bodyRect.top);\r\n        const left = Math.round(targetRect.left - bodyRect.left);\r\n        const bottom = Math.round(targetRect.bottom - bodyRect.top);\r\n        const right = Math.round(targetRect.left - bodyRect.left);\r\n        const height = Math.round(targetRect.height || bottom - top);\r\n        const width = Math.round(targetRect.width || right - left);\r\n        const pageHeight = this.maxHeight();\r\n        return { top, left, bottom, right, width, height, pageHeight };\r\n    }\r\n    resizeTarget(target, size) {\r\n        target['left'] -= size[0];\r\n        target['right'] += size[0];\r\n        target['top'] -= size[1] || size[0];\r\n        target['bottom'] += size[1] || size[0];\r\n        target['width'] += 2 * size[0];\r\n        target['height'] += 2 * (size[1] || size[0]);\r\n        return target;\r\n    }\r\n}\r\nNg3TourService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourService, deps: [{ token: i1.Router }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Injectable });\r\nNg3TourService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourService });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourService, decorators: [{\r\n            type: Injectable\r\n        }], ctorParameters: function () {\r\n        return [{ type: i1.Router }, { type: undefined, decorators: [{\r\n                        type: Inject,\r\n                        args: [PLATFORM_ID]\r\n                    }] }];\r\n    } });\n\n// @dynamic\r\nclass Ng3TourModalDirective {\r\n    constructor(elemRef, tour, \r\n    // @dynamic\r\n    platformId) {\r\n        this.elemRef = elemRef;\r\n        this.tour = tour;\r\n        this.onDestroy = new Subject();\r\n        this.isBrowser = isPlatformBrowser(platformId);\r\n    }\r\n    ngAfterViewInit() {\r\n        if (!this.isBrowser) {\r\n            return;\r\n        }\r\n        this.tour.getStepsStream().pipe(takeUntil(this.onDestroy), map((step) => {\r\n            if (step && step.stepName && this.name === step.stepName) {\r\n                step.stepTarget = this.elemRef.nativeElement;\r\n                if (isDevMode()) {\r\n                    console.error('Step in directive: ', step, this.elemRef.nativeElement);\r\n                    if (!step.stepTarget) {\r\n                        console.error('target absent', this.elemRef);\r\n                    }\r\n                    else {\r\n                        console.log(this.tour.getSizeAndPosition(step.stepTarget));\r\n                    }\r\n                }\r\n                step.targetSize = this.tour.getSizeAndPosition(step.stepTarget);\r\n                this.timeout = setTimeout(() => this.tour.getStepTargetStream().next(step), step.delay || 0);\r\n            }\r\n            return step;\r\n        })).subscribe();\r\n    }\r\n    ngOnDestroy() {\r\n        this.onDestroy.next(null);\r\n        clearTimeout(this.timeout);\r\n    }\r\n}\r\nNg3TourModalDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourModalDirective, deps: [{ token: i0.ElementRef }, { token: Ng3TourService }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Directive });\r\nNg3TourModalDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.1.1\", type: Ng3TourModalDirective, selector: \"[ng3TourStep]\", inputs: { name: [\"ng3TourStep\", \"name\"] }, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourModalDirective, decorators: [{\r\n            type: Directive,\r\n            args: [{\r\n                    selector: '[ng3TourStep]'\r\n                }]\r\n        }], ctorParameters: function () {\r\n        return [{ type: i0.ElementRef }, { type: Ng3TourService }, { type: undefined, decorators: [{\r\n                        type: Inject,\r\n                        args: [PLATFORM_ID]\r\n                    }] }];\r\n    }, propDecorators: { name: [{\r\n                type: Input,\r\n                args: ['ng3TourStep']\r\n            }] } });\n\n// @dynamic\r\nclass Ng3TourEventDirective {\r\n    constructor(tourService, \r\n    // @dynamic\r\n    platformId) {\r\n        this.tourService = tourService;\r\n        this.next = new EventEmitter();\r\n        this.prev = new EventEmitter();\r\n        this.done = new EventEmitter();\r\n        this.break = new EventEmitter();\r\n        this.isBrowser = isPlatformBrowser(platformId);\r\n    }\r\n    ngOnInit() {\r\n        if (!this.isBrowser) {\r\n            return;\r\n        }\r\n        if (this.eventType === 'next') {\r\n            this.handleNext();\r\n        }\r\n        if (this.eventType === 'prev') {\r\n            this.handlePrev();\r\n        }\r\n        if (this.eventType === 'close') {\r\n            this.handleClose();\r\n        }\r\n    }\r\n    onClick(event) {\r\n        this.handler();\r\n    }\r\n    handleNext() {\r\n        return this.handler = () => {\r\n            this.next.emit({\r\n                tourEvent: 'next',\r\n                index: this.tourService.getLastStep().index + 1,\r\n                history: this.tourService.getHistory()\r\n            });\r\n            this.tourService.nextStep();\r\n        };\r\n    }\r\n    handlePrev() {\r\n        return this.handler = () => {\r\n            this.prev.emit({\r\n                tourEvent: 'prev',\r\n                index: this.tourService.getLastStep().index - 1,\r\n                history: this.tourService.getHistory()\r\n            });\r\n            this.tourService.prevStep();\r\n        };\r\n    }\r\n    handleClose() {\r\n        return this.handler = () => {\r\n            if (this.tourService.getLastStep().index + 1 === this.tourService.getLastStep()['total']) {\r\n                this.done.emit({\r\n                    tourEvent: 'done',\r\n                    index: this.tourService.getLastStep().index,\r\n                    history: this.tourService.getHistory()\r\n                });\r\n            }\r\n            else {\r\n                this.break.emit({\r\n                    tourEvent: 'break',\r\n                    index: this.tourService.getLastStep().index,\r\n                    history: this.tourService.getHistory()\r\n                });\r\n            }\r\n            this.tourService.stopTour();\r\n        };\r\n    }\r\n}\r\nNg3TourEventDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourEventDirective, deps: [{ token: Ng3TourService }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Directive });\r\nNg3TourEventDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.1.1\", type: Ng3TourEventDirective, selector: \"[modalEvent]\", inputs: { eventType: [\"modalEvent\", \"eventType\"] }, outputs: { next: \"next\", prev: \"prev\", done: \"done\", break: \"break\" }, host: { listeners: { \"click\": \"onClick($event)\" } }, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourEventDirective, decorators: [{\r\n            type: Directive,\r\n            args: [{\r\n                    selector: '[modalEvent]',\r\n                }]\r\n        }], ctorParameters: function () {\r\n        return [{ type: Ng3TourService }, { type: undefined, decorators: [{\r\n                        type: Inject,\r\n                        args: [PLATFORM_ID]\r\n                    }] }];\r\n    }, propDecorators: { eventType: [{\r\n                type: Input,\r\n                args: ['modalEvent']\r\n            }], next: [{\r\n                type: Output\r\n            }], prev: [{\r\n                type: Output\r\n            }], done: [{\r\n                type: Output\r\n            }], break: [{\r\n                type: Output\r\n            }], onClick: [{\r\n                type: HostListener,\r\n                args: ['click', ['$event']]\r\n            }] } });\n\n// @dynamic\r\nclass Ng3TourModule {\r\n    static forRoot() {\r\n        return {\r\n            ngModule: Ng3TourModule,\r\n            providers: [\r\n                Ng3TourService\r\n            ]\r\n        };\r\n    }\r\n    static forChild() {\r\n        return {\r\n            ngModule: Ng3TourModule,\r\n            providers: []\r\n        };\r\n    }\r\n}\r\nNg3TourModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\nNg3TourModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourModule, declarations: [Ng3TourBackdropComponent,\r\n        Ng3TourComponent,\r\n        Ng3TourModalDirective,\r\n        Ng3TourEventDirective], imports: [CommonModule,\r\n        RouterModule], exports: [Ng3TourBackdropComponent,\r\n        Ng3TourComponent,\r\n        Ng3TourModalDirective,\r\n        Ng3TourEventDirective] });\r\nNg3TourModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourModule, imports: [[\r\n            CommonModule,\r\n            RouterModule,\r\n        ]] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.1\", ngImport: i0, type: Ng3TourModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{\r\n                    declarations: [\r\n                        Ng3TourBackdropComponent,\r\n                        Ng3TourComponent,\r\n                        Ng3TourModalDirective,\r\n                        Ng3TourEventDirective,\r\n                    ],\r\n                    entryComponents: [Ng3TourComponent],\r\n                    imports: [\r\n                        CommonModule,\r\n                        RouterModule,\r\n                    ],\r\n                    exports: [\r\n                        Ng3TourBackdropComponent,\r\n                        Ng3TourComponent,\r\n                        Ng3TourModalDirective,\r\n                        Ng3TourEventDirective,\r\n                    ]\r\n                }]\r\n        }] });\n\nconst DefaultBackdrop = {\r\n    opacity: .7,\r\n    targetFrameColor: 'transparent',\r\n    backdropColor: 'rgb(20, 60, 60)',\r\n    targetFrameSize: { top: 0, left: 0, right: 0, height: 0, width: 0, bottom: 0, pageHeight: 0 },\r\n    targetFrameResize: [0],\r\n    isBackdrop: true,\r\n    position: 'absolute'\r\n};\r\nconst DefaultModalStyles = {\r\n    position: 'absolute',\r\n    minWidth: '250px',\r\n    minHeight: '150px',\r\n    maxWidth: '400px',\r\n    maxHeight: '600px',\r\n    color: '#121212',\r\n};\r\nconst DefaultModal = {\r\n    className: '',\r\n    horisontalIndent: 50,\r\n    verticalIndent: 20,\r\n    withoutCounter: false,\r\n    withoutPrev: false,\r\n    arrowToTarget: true,\r\n    placement: 'down',\r\n    modalStyles: DefaultModalStyles,\r\n    customTemplate: false,\r\n    delay: 1000,\r\n    animatedStep: true,\r\n    smoothScroll: false,\r\n    scrollTo: true,\r\n    closeOnClickOutside: false,\r\n    autofocus: true,\r\n    modalSize: {\r\n        modHeight: 100,\r\n        modWidth: 100\r\n    },\r\n    totalSteps: 1\r\n};\r\nconst ButtonsDefaultTranslation = {\r\n    done: {\r\n        'en-EN': 'done',\r\n        'ru-RU': 'закр',\r\n        'fr-FR': 'fini',\r\n    },\r\n    prev: {\r\n        'en-EN': 'prev',\r\n        'ru-RU': 'пред',\r\n        'fr-FR': 'préc'\r\n    },\r\n    next: {\r\n        'en-EN': 'next',\r\n        'ru-RU': 'след',\r\n        'fr-FR': 'proch',\r\n    },\r\n    of: {\r\n        'en-EN': 'of',\r\n        'fr-FR': 'de',\r\n        'ru-RU': \"из\",\r\n    }\r\n};\r\nconst DefaultTourEventHandler = (props) => { };\r\nconst DefaultTourEventHandlers = {\r\n    tourStart: DefaultTourEventHandler,\r\n    tourEnd: DefaultTourEventHandler,\r\n    tourBreak: DefaultTourEventHandler,\r\n    next: DefaultTourEventHandler,\r\n    prev: DefaultTourEventHandler,\r\n};\r\nconst DefaultTourOptions = {\r\n    tourCtrlBtns: ButtonsDefaultTranslation,\r\n    tourEvents: DefaultTourEventHandlers,\r\n    tourBackdrop: DefaultBackdrop,\r\n    tourModal: DefaultModal,\r\n};\r\nfunction setTourProps(props, defaultProps = DefaultTourOptions) {\r\n    const ctrlBtns = Object.assign(Object.assign({}, defaultProps.tourCtrlBtns), props.tourCtrlBtns), tourEvents = Object.assign(Object.assign({}, defaultProps.tourEvents), props.tourEvents), backdropOptions = Object.assign(Object.assign({}, defaultProps.tourBackdrop), props.tourBackdrop), tourModalOptions = Object.assign(Object.assign({}, defaultProps.tourModal), props.tourModal);\r\n    return { tourCtrlBtns: ctrlBtns, tourEvents, tourModal: tourModalOptions, tourBackdrop: backdropOptions };\r\n}\n\n/*\r\n * Public API Surface of ng-tour\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { ButtonsDefaultTranslation, DefaultBackdrop, DefaultModal, DefaultModalStyles, DefaultTourEventHandler, DefaultTourEventHandlers, DefaultTourOptions, Ng3TourBackdropComponent, Ng3TourComponent, Ng3TourEventDirective, Ng3TourModalDirective, Ng3TourModule, Ng3TourService, setTourProps };\n//# sourceMappingURL=ng3-tour.mjs.map\n","map":{"version":3,"file":"ng3-tour.mjs","sources":["../../../projects/ng3-tour/src/lib/components/ng3-tour-backdrop/ng3-tour-backdrop.component.ts","../../../projects/ng3-tour/src/lib/components/ng3-tour-backdrop/ng3-tour-backdrop.component.html","../../../projects/ng3-tour/src/lib/components/ng3-tour.component.ts","../../../projects/ng3-tour/src/lib/components/ng3-tour.component.html","../../../projects/ng3-tour/src/lib/services/ng3-tour.service.ts","../../../projects/ng3-tour/src/lib/directives/ng3-tour-modal.directive.ts","../../../projects/ng3-tour/src/lib/directives/ng3-tour-modal-events.directive.ts","../../../projects/ng3-tour/src/lib/ng3-tour.module.ts","../../../projects/ng3-tour/src/lib/interfaces/ng3-tour.interface.ts","../../../projects/ng3-tour/src/public_api.ts","../../../projects/ng3-tour/src/ng3-tour.ts"],"sourcesContent":["import { Component, Input, OnInit} from '@angular/core';\r\n\r\nimport {IBackdrop} from '../../interfaces/ng3-tour.interface'\r\n\r\n@Component({\r\n  selector: 'ng3-tour-backdrop',\r\n  templateUrl: './ng3-tour-backdrop.component.html',\r\n  styleUrls: ['./ng3-tour-backdrop.component.scss'],\r\n})\r\nexport class Ng3TourBackdropComponent implements OnInit {\r\n  @Input('props') props!: IBackdrop;\r\n  \r\n  constructor() { \r\n    \r\n  }\r\n\r\n  ngOnInit() {\r\n    // console.log(this.props.targetWindowColor)\r\n    console.error('Backdrop props: ', this.props)\r\n  }\r\n\r\n}\r\n","<div\r\n    class=\"tour-step-backdrop\"\r\n    [style.height.px]=\"props.targetFrameSize.pageHeight\"\r\n    [style.position]=\"props.position\"\r\n    [style.opacity]=\"props.opacity\"\r\n>\r\n  <div class=\"tour-step-backdrop__container\" >\r\n    <div \r\n      class=\"tour-step-backdrop__top\"\r\n      [style.height.px]=\"props.targetFrameSize.top\"\r\n      [style.background]=\"props.backdropColor\"\r\n    ></div>\r\n    <div \r\n      class=\"tour-step-backdrop__middle\"\r\n      [style.height.px]=\"props.targetFrameSize.height\"\r\n    >\r\n      <div \r\n        class=\"tour-step-backdrop__left\"\r\n        [style.height.px]=\"props.targetFrameSize.height\"\r\n        [style.width.px]=\"props.targetFrameSize.left\"\r\n        [style.background]=\"props.backdropColor\"\r\n      ></div>\r\n      <div\r\n        class=\"target-window\"\r\n        [style.width.px]=\"props.targetFrameSize.width\"\r\n        [style.height.px]=\"props.targetFrameSize.height\"\r\n        [style.background]=\"props.targetFrameColor\"\r\n      >\r\n      </div>\r\n      <div\r\n        class=\"tour-step-backdrop__right\"\r\n        [style.height.px]=\"props.targetFrameSize.height\"\r\n        [style.background]=\"props.backdropColor\"\r\n      ></div>\r\n    </div>\r\n    <div\r\n      class=\"tour-step-backdrop__bottom\"\r\n      [style.background]=\"props.backdropColor\"\r\n      [style.height.px]=\"props.targetFrameSize.pageHeight - props.targetFrameSize.bottom\"\r\n    ></div>\r\n  </div>\r\n</div>\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  Output,\r\n  EventEmitter,\r\n  HostListener,\r\n  Inject,\r\n  PLATFORM_ID,\r\n  OnDestroy,\r\n  ViewEncapsulation,\r\n  ElementRef,\r\n  isDevMode,\r\n  AfterViewInit,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport {isPlatformBrowser} from '@angular/common';\r\nimport {BehaviorSubject, Observable, Subject} from 'rxjs';\r\nimport {map, takeUntil, timeout} from 'rxjs/operators';\r\n\r\nimport {\r\n  Ng3TourService,\r\n  ITourStep,\r\n  IModalEventHandlers,\r\n  StepSubject,\r\n  IModalPosition\r\n} from '../../public_api';\r\nimport { IModalStyles } from '../interfaces/ng3-tour.interface';\r\nimport { IStepProps } from '../interfaces/ng3-tour.interface';\r\n\r\n// @dynamic\r\n@Component({\r\n  selector: 'ng3-tour-template',\r\n  templateUrl: './ng3-tour.component.html',\r\n  styleUrls: ['./ng3-tour.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n  exportAs: 'tour',\r\n})\r\n\r\nexport class Ng3TourComponent implements OnInit, OnDestroy, IModalEventHandlers {\r\n  className!: string;\r\n  currentTarget: Element = null as unknown as Element;\r\n  currentStep: ITourStep = null as unknown as ITourStep;\r\n  stepTarget$ = null as unknown as Observable<StepSubject>;\r\n  currentStep$ = new BehaviorSubject<StepSubject>(this.currentStep);\r\n  isBrowser: boolean;\r\n  modalElement: Element = null as unknown as Element;\r\n  timeoutForCulc = 100;\r\n  onDestroy = new Subject<null>();\r\n  timeouts: ReturnType<typeof setTimeout>[] = [];\r\n  @ViewChild('modal') modal!: ElementRef<HTMLDivElement>\r\n  @Output() next: EventEmitter<any> = new EventEmitter();\r\n  @Output() prev: EventEmitter<any> = new EventEmitter();\r\n  @Output() done: EventEmitter<any> = new EventEmitter();\r\n  @Output() break: EventEmitter<any> = new EventEmitter();\r\n\r\n  constructor(\r\n    private readonly tourService: Ng3TourService,\r\n    // @dynamic\r\n    @Inject(PLATFORM_ID) platformId: {}) {\r\n      this.isBrowser = isPlatformBrowser(platformId);\r\n      console.log('construct')\r\n  }\r\n  @HostListener('document:click', ['$event']) clickOutsideToClose($Event: Event): void {\r\n    if (this.currentStep) {\r\n      if (this.currentStep.modal!.closeOnClickOutside && !this.modal.nativeElement.contains($Event.target as Node)) {\r\n        this.onClose($Event);\r\n      }\r\n    }       \r\n  }\r\n  @HostListener('window:resize', ['$event']) onResize(event: Event) {\r\n    if (this.currentStep) {\r\n      this.culcTargetSize(this.currentTarget);\r\n      this.getModal();\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log('sdfsf')\r\n    if (!this.isBrowser) {\r\n      return;\r\n    }\r\n    this.stepTarget$ = this.tourService.getStepTargetStream().pipe(\r\n      map((step: StepSubject) => {\r\n        console.log('step: ', step)\r\n        if (step?.stepTarget && this.tourService.getTourStatus()) {\r\n          this.currentTarget = step.stepTarget;\r\n          this.currentStep = this.tourService.getStepByName(step.stepName);\r\n          if (isDevMode()) {\r\n            console.log('currentStep in component: ', this.currentStep, this.modal.nativeElement);\r\n          }\r\n          this.culcTargetSize(step.stepTarget);\r\n          this.resetClasses();\r\n          this.currentStep.backdrop!.targetFrameColor = 'transparent';\r\n          this.currentStep$.next(this.currentStep);\r\n          this.getModal()\r\n        } else {\r\n          this.currentStep = null  as unknown as ITourStep;\r\n        }\r\n        return step;\r\n      })\r\n    )\r\n    this.tourService.getStepsStream().pipe(\r\n      takeUntil(this.onDestroy),\r\n      map((step: StepSubject) => {\r\n        this.currentStep = null  as unknown as ITourStep\r\n        if (step) {\r\n          this.resetClasses();\r\n        }\r\n        return step\r\n      })\r\n    ).subscribe();\r\n    console.log('after init: ', this.currentStep, this.modal.nativeElement)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.onDestroy.next(null);\r\n    this.timeouts.forEach(i => clearTimeout(i));\r\n  }\r\n  \r\n  private resetClasses(): void {\r\n    const step = this.currentStep;\r\n    const props = step?.modal || this.tourService.getLastStep().modal!;\r\n    const {animatedStep, arrowToTarget,  placement, className} = props;\r\n    const arrow = arrowToTarget ? 'with-arrow' : '';\r\n    if (step) {\r\n      const animation = animatedStep ? 'animation-on' : '';\r\n      this.className = `${arrow} pos-${placement} ${animation} ${step.stepName} ${className}`.trim();\r\n    } else {\r\n      const animation = 'fade-on';\r\n      this.className = `${arrow} pos-${placement} ${animation} ${className}`.trim();\r\n    }\r\n  }\r\n\r\n  private culcTargetSize(target: Element): void {\r\n    const size = this.tourService.getSizeAndPosition(target);\r\n    const resize = this.currentStep.backdrop?.targetFrameResize;\r\n    this.currentStep.backdrop!.targetFrameSize = resize \r\n      ? this.tourService.resizeTarget(size, resize) \r\n      : size;\r\n  }\r\n\r\n  private defineStepPlacementToWindow(placement: string) {\r\n    const modalSize = this.currentStep.modal?.modalSize\r\n    if (!modalSize || !this.currentStep.modal) return\r\n    this.currentStep.modal.modalStyles = this.currentStep.modal?.modalStyles || {} as IModalStyles\r\n    const {modHeight, modWidth} = modalSize;\r\n    const HI = this.currentStep['modalProps'].horisontalIndent;\r\n    if (/^right-center$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.right = `${HI}px`;\r\n      this.currentStep.modal.modalStyles.top = `${Math.round(window.innerHeight / 2 - modHeight / 2)}px`;\r\n    } else if (/^left-center$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.left = `${HI}px`;\r\n      this.currentStep.modal.modalStyles.top = `${Math.round(window.innerHeight / 2 - modHeight / 2)}px`;\r\n    } else if (/^center$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.left = `${Math.round(window.innerWidth / 2 - modWidth / 2)}px`;\r\n      this.currentStep.modal.modalStyles.top = `${Math.round(window.innerHeight / 2 - modHeight / 2)}px`;\r\n    }\r\n  }\r\n  public getModal (attempts = 3) {\r\n    this.modalElement = this.modal.nativeElement.querySelector('.tour-step-modal') as Element;\r\n    if (!this.modalElement && attempts > 0) {\r\n      console.error(attempts, this.modalElement, this.currentStep, this.modal.nativeElement.querySelector('.tour-step-wrapper'))\r\n      attempts -= 1;\r\n      this.timeouts[this.timeouts.length] = setTimeout(() => this.getModal(attempts), this.timeoutForCulc);\r\n      return this.timeouts;\r\n    }\r\n    return this.defineModalPlacementToTarget();\r\n  }\r\n\r\n  private defineModalPlacementToTarget(modal: Element = this.modalElement) {\r\n    if (!this.currentStep.modal || !this.currentStep.backdrop || !modal) {\r\n      console.error('no current step modal options', this.currentStep, this.modalElement)\r\n      return\r\n    }\r\n    const modalRect = modal.getBoundingClientRect();\r\n    const  modHeight = Math.round(modalRect.height ? modalRect.height : modalRect.bottom - modalRect.top);\r\n    const  modWidth = Math.round(modalRect.width ? modalRect.width : modalRect.right - modalRect.left);\r\n    this.currentStep.modal.modalSize = {modWidth, modHeight};\r\n    const {placement, scrollTo} = this.currentStep.modal;\r\n    const {top = 0, bottom = 0, width = 0, left = 0, right = 0} = this.currentStep.backdrop!.targetFrameSize!;\r\n    // console.error(modalRect, this.backdropOptions);\r\n    if (!placement) {\r\n      console.error('no placement')\r\n      return\r\n    }\r\n    this.currentStep.modal.modalStyles = this.currentStep.modal.modalStyles || {} as IModalStyles\r\n    const VI = this.currentStep.modal.verticalIndent || 0;\r\n    const HI = this.currentStep.modal.horisontalIndent || 0;\r\n    if (/^down$/i.test(placement!)) {\r\n      this.currentStep.modal.modalStyles.top = `${bottom + VI}px`;\r\n      this.currentStep.modal.modalStyles.left = `${Math.round(left - modWidth / 2)}px`;\r\n    } else if (/^top$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.top = `${top  - modHeight - VI}px`;\r\n      this.currentStep.modal.modalStyles.left = `${Math.round(left - modWidth / 2)}px`;\r\n    } else if (/^left$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.top = `${top}px`;\r\n      this.currentStep.modal.modalStyles.left = `${left - modWidth - VI}px`;\r\n    } else if (/^right$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.top = `${top}px`;\r\n      this.currentStep.modal.modalStyles.left = `${right + width + VI}px`;\r\n    } else if (/^left-top$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.top = `${top - modHeight + HI}px`;\r\n      this.currentStep.modal.modalStyles.left = `${left - width - VI}px`;\r\n    } else if (/^right-top$/i.test(placement)) {\r\n      this.currentStep.modal.modalStyles.top = `${top - modHeight + HI}px`;\r\n      this.currentStep.modal.modalStyles.left = `${right + width + VI}px`;\r\n    } else {\r\n      this.defineStepPlacementToWindow(placement);\r\n    }\r\n    if (this.currentStep.modal.autofocus && modal) {\r\n      this.setFocus(modal);\r\n    }\r\n    if (scrollTo) {\r\n      this.scrollTo();\r\n    }\r\n    this.currentStep$.next(this.currentStep);\r\n    setTimeout(() => {\r\n      console.error('ModalStyles', this.currentTarget.getBoundingClientRect(), \r\n      this.currentStep.backdrop!.targetFrameSize)\r\n    }, 10);\r\n  }\r\n  \r\n  private setFocus(modal: Element) {\r\n    const nextBtn = modal.querySelector('.tour-btn-next') as HTMLElement;\r\n    const endBtn = modal.querySelector('.tour-btn-done') as HTMLElement;\r\n    if (nextBtn) {\r\n      nextBtn.focus();\r\n    } else if (endBtn) {\r\n      endBtn.focus();\r\n    }\r\n  }\r\n  private scrollTo() {\r\n    if (!this.currentStep.modal || !this.currentStep.backdrop) {\r\n      console.error('no current step modal options')\r\n      return\r\n    }\r\n    const {placement, modalStyles} = this.currentStep.modal;\r\n    const {position} = modalStyles!\r\n    const {left = 0, top = 0, bottom = 0} = this.currentStep.backdrop.targetFrameSize!;\r\n    const HI = this.currentStep.modal.horisontalIndent!;\r\n    const Top = placement !== 'top' ? top - 2 * HI : top - bottom - HI;\r\n    const behavior = this.currentStep.modal.smoothScroll ? 'smooth' : 'auto';\r\n    if (position === 'absolute') {\r\n      document.documentElement.scroll({top: Top, left, behavior});\r\n    } else {\r\n      document.documentElement.scroll({top: 0, left: 0, behavior});\r\n    }\r\n  }\r\n  public onNext(event: Event) {\r\n    this.next.emit({\r\n      stepEvent: 'next',\r\n      index: this.currentStep.index! + 1,\r\n      history: this.tourService.getHistory(),\r\n    });\r\n    this.tourService.nextStep();\r\n  }\r\n  public onPrev(event: Event) {\r\n    this.prev.emit({\r\n      stepEvent: 'prev',\r\n      index: this.currentStep.index! - 1,\r\n      history: this.tourService.getHistory(),\r\n    });\r\n    this.tourService.prevStep();\r\n  }\r\n  public onClose(event: Event) {\r\n    if (this.currentStep.index !== this.currentStep['total'] - 1) {\r\n      this.break.emit({\r\n        stepEvent: 'break',\r\n        index: this.currentStep.index,\r\n        history: this.tourService.getHistory(),\r\n      });\r\n    } else {\r\n      this.done.emit({\r\n        stepEvent: 'done',\r\n        index: this.currentStep.index,\r\n        history: this.tourService.getHistory(),\r\n      });\r\n    }\r\n    this.tourService.stopTour();\r\n  }\r\n}\r\n","<div class=\"tour-step-wrapper\" *ngIf=\"stepTarget$ | async\" [ngClass]=\"className\" #modal>\r\n  <ng3-tour-backdrop\r\n    *ngIf=\"currentStep && currentStep.backdrop.isBackdrop\"\r\n    [props]=\"currentStep.backdrop\"\r\n  >\r\n  </ng3-tour-backdrop>\r\n  <div\r\n    *ngIf=\"currentStep\"\r\n    [ngClass]=\"currentStep.modal.className\"\r\n    class=\"tour-step-modal\"\r\n    [ngStyle]=\"currentStep.modal.modalStyles\"\r\n  > \r\n    <div *ngIf=\"!currentStep.modal.customTemplate\" class=\"tour-step-modal__content\">\r\n      <div class=\"tour-step-modal__header\">\r\n        <h3 class=\"tour-step-modal__title\">\r\n          {{currentStep.title}}\r\n        </h3>\r\n        <button class=\"tour-btn-close\" type=\"button\" (click)=\"onClose($event)\">\r\n          &times;\r\n        </button>\r\n      </div>\r\n      <div class=\"tour-step-modal__body\">\r\n        <p class=\"tour-step-modal__description\">\r\n          {{currentStep.description}}\r\n        </p>\r\n      </div>\r\n      <div class=\"tour-step-modal__footer\">\r\n        <div *ngIf=\"!currentStep.modal.withoutCounter\" class=\"tour-step-modal__counter\">\r\n          {{currentStep.index + 1}} {{currentStep.ctrlBtns['of']}} {{currentStep['total']}}\r\n        </div>\r\n        <button\r\n          *ngIf=\"!currentStep.modal.withoutPrev && currentStep.index\" \r\n          type=\"button\" \r\n          class=\"tour-btn tour-btn-prev\"\r\n          (click)=\"onPrev($event)\"\r\n        >\r\n          {{currentStep.ctrlBtns['prev']}}\r\n        </button>\r\n        <button\r\n          *ngIf=\"currentStep.index + 1 !== currentStep['total']\"\r\n          type=\"button\"\r\n          class=\"tour-btn tour-btn-next\"\r\n          (click)=\"onNext($event)\"          \r\n        >\r\n          {{currentStep.ctrlBtns['next']}}\r\n        </button>\r\n        <button\r\n          *ngIf=\"currentStep.index + 1 === currentStep['total']\"\r\n          type=\"button\"\r\n          class=\"tour-btn tour-btn-done\"\r\n          (click)=\"onClose($event)\"\r\n        >\r\n          {{currentStep.ctrlBtns['done']}}\r\n        </button>\r\n      </div>\r\n    </div>\r\n      <div #content *ngIf=\"currentStep.modal.customTemplate\" class=\"content\">\r\n        <ng-content></ng-content>\r\n      </div>\r\n  </div>\r\n</div>\r\n<!-- *ngIf=\"currentStep as step\" -->","import {Injectable, isDevMode, PLATFORM_ID, Inject} from '@angular/core';\r\nimport {isPlatformBrowser} from '@angular/common'\r\nimport {BehaviorSubject, Observable} from 'rxjs';\r\nimport {Router} from '@angular/router';\r\n\r\nimport {\r\n  ITour,\r\n  ICtrlBtns,\r\n  ITourStep,\r\n  DefaultTourEventHandler,\r\n  ButtonsDefaultTranslation,\r\n  DefaultTourEventHandlers,\r\n  setTourProps,\r\n  StepSubject,\r\n  ITargetFrameSize\r\n} from '../../public_api';\r\nimport { IStepProps, ITourEventHandlers, ITourProps } from '../interfaces/ng3-tour.interface';\r\n\r\n // @dynamic\r\n@Injectable()\r\nexport class Ng3TourService {\r\n  private steps!: ITourStep[];\r\n  private tourStarted = false;\r\n  private stepsStream$ = new BehaviorSubject<StepSubject>(null as unknown as StepSubject);\r\n  private stepTargetStream$ = new BehaviorSubject<StepSubject>(null as unknown as StepSubject);\r\n  private history: number[] = [];\r\n  private routeChanged = false;\r\n  private tourBreak = DefaultTourEventHandler;\r\n  private tourEnd = DefaultTourEventHandler;\r\n  private next = DefaultTourEventHandler;\r\n  private prev = DefaultTourEventHandler;\r\n  private isBrowser: boolean;\r\n  private lang: string;\r\n  constructor(\r\n    private router: Router,\r\n    // @dynamic\r\n    @Inject(PLATFORM_ID) platformId: {}) {\r\n    this.nextStep = this.nextStep.bind(this);\r\n    this.prevStep = this.prevStep.bind(this);\r\n    this.stopTour = this.stopTour.bind(this);\r\n    this.getLang = this.getLang.bind(this);\r\n    this.isBrowser = isPlatformBrowser(platformId);\r\n    this.lang = this.isBrowser ? navigator.language : '';\r\n  }\r\n\r\n\r\n  private validateOptions(tour: ITourProps): void | never {\r\n    const regExpr = /^top$|^down$|^left$|^right$|^center$|^right-center$|^left-center$|^right-top$|^left-top$/i;\r\n    tour.steps.forEach((step: IStepProps, i: number) => {\r\n      if (step['modal']?.placement && !regExpr.test(step['modal']?.placement)) {\r\n        throw Error(`Placement option of the step ${i} of the ng3-tour is invalid ${step['modal']?.placement}`);\r\n      }\r\n    });\r\n    if (tour['tourModal']?.placement && !regExpr.test(tour['tourModal']?.placement)) {\r\n      throw Error(`Placement option of the ng3-tour is invalid ${tour['tourModal']?.placement}`);\r\n    }\r\n  }\r\n\r\n  private setSteps(tour: ITourProps): void {\r\n    const {steps, ...restProps} = tour;\r\n    const tourOptions = setTourProps(restProps);\r\n    this.steps = {...tour}.steps.map((step, i) => {\r\n      step['index'] = i;\r\n      step['total'] = steps.length;\r\n      if (step['description'] && typeof step['description'] === 'object') {\r\n        step['description'] = this.defineLocalName(step['description']);\r\n      }\r\n      if (step['title'] && typeof step['title'] === 'object') {\r\n        step['title'] = this.defineLocalName(step['title'])\r\n      }\r\n      step['backdrop'] = {...tourOptions.tourBackdrop, ...step['backdrop']};\r\n      let {modalStyles, ...restProps} = step['modal'] || {};\r\n      modalStyles = {...tourOptions.tourModal!.modalStyles, ...modalStyles};\r\n      step['modal'] = {...tourOptions.tourModal, ...restProps, modalStyles};\r\n      step['ctrlBtns'] = this.defineBtnsNames(tour['tourCtrlBtns'] || ButtonsDefaultTranslation);\r\n      return step as ITourStep;\r\n    });\r\n    if (isDevMode()) {\r\n      console.log('Development mode: ', isDevMode())\r\n      console.log('ng3-tour is initiated with steps:');\r\n      console.log(this.steps);\r\n    }\r\n  }\r\n\r\n  private defineLocalName(obj: {[key: string]: string}): string {\r\n    let result: string;\r\n    if (!this.isBrowser) {\r\n      return '';\r\n    }\r\n    if (obj.hasOwnProperty(this.lang)) {\r\n      result = obj[this.lang];\r\n    } else {\r\n      const setLanguages = Object.keys(obj);\r\n      const ralatedLang = setLanguages.filter(l => l.includes(this.lang.slice(0, 2)))[0];\r\n      if (ralatedLang) {\r\n        result = obj[ralatedLang]\r\n      } else {\r\n        result = obj[setLanguages[0]];\r\n      }\r\n    }\r\n    if (typeof result === 'string') {\r\n      return result;\r\n    }\r\n    console.error(`Tour configuration error with ${JSON.stringify(obj)}`)\r\n    return 'Error'\r\n  }\r\n\r\n  private defineBtnsNames(btns: ICtrlBtns): {[propName: string]: string} {\r\n    const btnCtrls = {} as {[propName: string]: string};\r\n    for (let prop in btns) {\r\n      if (btns.hasOwnProperty(prop)) {\r\n        let result: string;\r\n        if (typeof btns[prop] === 'string') {\r\n          result = btns[prop];\r\n        } else if (typeof btns[prop] === 'object' && btns[prop][this.lang] === 'string') {\r\n          result = btns[prop][this.lang]\r\n        } else {\r\n          const setOfLanguages = Object.keys(btns[prop]);\r\n          const ralatedLang = setOfLanguages.filter(l => l.includes(this.lang.slice(0, 2)))[0];\r\n          if (ralatedLang) {\r\n            result = btns[prop][ralatedLang]\r\n          } else {\r\n            result = btns[prop][setOfLanguages[0]];\r\n          }\r\n          if (typeof result === 'string') {\r\n            btnCtrls[prop] = result;\r\n          } else if (this.isBrowser) {\r\n            console.error(`Tour configuration error with ${JSON.stringify(btns)}`);\r\n            btnCtrls[prop] = 'Error'\r\n          }  \r\n        }\r\n      }\r\n    }\r\n    return btnCtrls;\r\n  }\r\n\r\n  public initStep(step: number): void {\r\n    // console.log(step, this.history)\r\n    const previousStep = this.history.length ? this.getLastStep() : {route: null};\r\n    const newStep = this.steps[step];\r\n    this.routeChanged = previousStep.route !== newStep.route;\r\n    this.history.push(step);\r\n    if (newStep.route && this.routeChanged) {\r\n      this.router.navigate([newStep.route]);\r\n    }\r\n    const delay = newStep.modal!.delay;\r\n    this.stepsStream$.next({stepName: newStep.stepName, delay});\r\n  }\r\n\r\n  public getLang() {\r\n    return this.lang;\r\n  }\r\n  public getHistory() {\r\n    return this.history;\r\n  }\r\n  public getStepsLength() {\r\n    return this.steps.length;\r\n  }\r\n  public resetStep(stepName: string | number, step: ITourStep) {\r\n    const index = typeof stepName === 'number' ? stepName : this.getStepByName(stepName).index!;\r\n    this.steps[index] = {...step};\r\n  }\r\n  public getStepByName(stepName: string): ITourStep {\r\n    return this.steps.filter(step => step.stepName === stepName)[0];\r\n  }\r\n  public getStepByIndex(index = 0): ITourStep {\r\n    return this.steps[index];\r\n  }\r\n  public getLastStep(): ITourStep {\r\n    if (this.history.length) return this.steps[this.history.slice(-1)[0]];\r\n    return null as unknown as ITourStep;\r\n  }\r\n  public getStepsStream(): BehaviorSubject<StepSubject> {\r\n    return this.stepsStream$;\r\n  }\r\n  public getStepTargetStream(): BehaviorSubject<StepSubject> {\r\n    return this.stepTargetStream$;\r\n  }\r\n  public isRouteChanged() {\r\n    return this.routeChanged;\r\n  }\r\n  private setTourStatus(status: boolean): void {\r\n    this.tourStarted = status;\r\n  }\r\n  public getTourStatus() {\r\n    return this.tourStarted;\r\n  }\r\n  public startTour(tour: ITourProps): void {\r\n    this.validateOptions(tour);\r\n    const tourEvantHendlers = {...DefaultTourEventHandlers, ...tour['tourEvents']} as ITourEventHandlers;\r\n    const  {tourBreak, tourStart, tourEnd, next, prev} = tourEvantHendlers\r\n    tourStart({tourEvent: 'start', tour});\r\n    this.tourBreak = tourBreak;\r\n    this.tourEnd = tourEnd;\r\n    this.next = next;\r\n    this.prev = prev;\r\n    this.setSteps(tour);\r\n    this.initStep(0);\r\n    this.setTourStatus(true);\r\n  }\r\n  public stopTour() {\r\n    const index = this.getLastStep().index;\r\n    const latestStepIndex = this.steps.length - 1;\r\n    if ( index! < latestStepIndex) {\r\n      this.tourBreak({tourEvent: 'break', step: index, history: this.history});\r\n    } else if (latestStepIndex === index) {\r\n      this.tourEnd({tourEvent: 'end', step: index, history: this.history});\r\n    }\r\n    this.setTourStatus(false);\r\n    this.stepTargetStream$.next(null as unknown as ITourStep);\r\n    this.stepsStream$.next(null as unknown as ITourStep);\r\n    this.steps.length = 0;\r\n    this.history.length = 0;\r\n  }\r\n  public nextStep() {\r\n    const step = this.getLastStep().index! + 1;\r\n    this.next({tourEvent: 'next', step, history: this.history});\r\n    this.initStep(step);\r\n  }\r\n  public prevStep() {\r\n    const step = this.getLastStep().index! - 1;\r\n    this.prev({tourEvent: 'prev', step, history: this.history});\r\n    this.initStep(step);\r\n  }\r\n  public maxHeight() {\r\n    return Math.round(Math.max(\r\n      document.body.scrollHeight,\r\n      document.documentElement.scrollHeight,\r\n      document.body.offsetHeight,\r\n      document.documentElement.offsetHeight,\r\n      document.body.clientHeight,\r\n      document.documentElement.clientHeight,\r\n      window.innerHeight\r\n    ));\r\n  }\r\n  public getSizeAndPosition(el: Element) {\r\n    const targetRect = el.getBoundingClientRect();\r\n    if (isDevMode() && (!targetRect || !el) ) {\r\n      console.error(el, targetRect)\r\n    }\r\n    const bodyRect = document.body.getBoundingClientRect();\r\n    const top = Math.round(targetRect.top - bodyRect.top);\r\n    const left = Math.round(targetRect.left - bodyRect.left);\r\n    const bottom = Math.round(targetRect.bottom - bodyRect.top);\r\n    const right = Math.round(targetRect.left - bodyRect.left);\r\n    const height = Math.round(targetRect.height || bottom - top);\r\n    const width = Math.round(targetRect.width || right - left);\r\n    const pageHeight = this.maxHeight();\r\n    return {top, left, bottom, right, width, height, pageHeight};\r\n  }\r\n\r\n  public resizeTarget(target: ITargetFrameSize, size: number[]): ITargetFrameSize {\r\n    target['left'] -= size[0];\r\n    target['right'] += size[0];\r\n    target['top'] -= size[1] || size[0];\r\n    target['bottom'] += size[1] || size[0];\r\n    target['width'] += 2 * size[0];\r\n    target['height'] += 2 * (size[1] || size[0]);\r\n    return target;\r\n  }\r\n}\r\n","import { Directive, Input, Inject, PLATFORM_ID, AfterViewInit, OnDestroy, ElementRef, isDevMode} from '@angular/core';\r\nimport {isPlatformBrowser} from '@angular/common';\r\nimport {Subject} from 'rxjs';\r\nimport {map, takeUntil} from 'rxjs/operators';\r\n\r\nimport {Ng3TourService, StepSubject} from '../../public_api';\r\nimport { TimeInterval } from 'rxjs/internal/operators/timeInterval';\r\n\r\n// @dynamic\r\n@Directive({\r\n  selector: '[ng3TourStep]'\r\n})\r\nexport class Ng3TourModalDirective implements AfterViewInit, OnDestroy {\r\n  @Input('ng3TourStep') name!: string;\r\n  private readonly onDestroy = new Subject<any>();\r\n  isBrowser: boolean;\r\n  timeout!: ReturnType<typeof setTimeout>;\r\n  constructor(\r\n    private elemRef: ElementRef,\r\n    private readonly tour: Ng3TourService,   \r\n    // @dynamic\r\n    @Inject(PLATFORM_ID) platformId: {}) {\r\n      this.isBrowser = isPlatformBrowser(platformId);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (!this.isBrowser) {\r\n      return;\r\n    }\r\n    this.tour.getStepsStream().pipe(\r\n      takeUntil(this.onDestroy),\r\n      map((step: StepSubject) => {\r\n        if (step && step.stepName && this.name === step.stepName) {\r\n          step.stepTarget = this.elemRef.nativeElement;\r\n          \r\n          if (isDevMode()) {\r\n            console.error('Step in directive: ', step, this.elemRef.nativeElement)\r\n            if (!step.stepTarget) {\r\n              console.error('target absent', this.elemRef);\r\n            } else {\r\n              console.log(this.tour.getSizeAndPosition(step.stepTarget!))\r\n            }\r\n          }\r\n          step.targetSize = this.tour.getSizeAndPosition(step.stepTarget!)\r\n          this.timeout = setTimeout(() => this.tour.getStepTargetStream().next(step), step.delay || 0);\r\n      \r\n        }\r\n        return step;\r\n      }\r\n    )).subscribe();\r\n  }\r\n  ngOnDestroy() {\r\n    this.onDestroy.next(null);\r\n    clearTimeout(this.timeout);\r\n  }\r\n}\r\n","import {\r\n    Directive,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    OnInit,\r\n    Inject,\r\n    PLATFORM_ID,\r\n    HostListener\r\n} from '@angular/core';\r\nimport {isPlatformBrowser} from '@angular/common';\r\n\r\nimport {Ng3TourService, IStepEventProps} from '../../public_api';\r\n// @dynamic\r\n@Directive({\r\n    selector: '[modalEvent]',\r\n})\r\nexport class Ng3TourEventDirective implements OnInit {\r\n    @Input('modalEvent') eventType!: string; // possible values 'next', 'prev', 'close'\r\n // possible values 'next', 'prev', 'close'\r\n    isBrowser: boolean;\r\n\r\n    @Output() next: EventEmitter<IStepEventProps> = new EventEmitter();\r\n    @Output() prev: EventEmitter<IStepEventProps> = new EventEmitter();\r\n    @Output() done: EventEmitter<IStepEventProps> = new EventEmitter();\r\n    @Output() break: EventEmitter<IStepEventProps> = new EventEmitter();\r\n    handler!: () => void;\r\n    constructor(\r\n        private readonly tourService: Ng3TourService,\r\n        // @dynamic\r\n        @Inject(PLATFORM_ID) platformId: {}) {\r\n        this.isBrowser = isPlatformBrowser(platformId);\r\n    }\r\n    ngOnInit() {\r\n        if (!this.isBrowser) {\r\n            return;\r\n        }\r\n        if (this.eventType === 'next') {\r\n           this.handleNext();\r\n        }\r\n        if (this.eventType === 'prev') {\r\n            this.handlePrev();\r\n        }\r\n        if (this.eventType === 'close') {\r\n            this.handleClose();\r\n        }\r\n    }\r\n    @HostListener('click', ['$event']) onClick(event: Event) {\r\n        this.handler();\r\n    }\r\n    handleNext() {\r\n        return this.handler = () => {\r\n            this.next.emit({\r\n                tourEvent: 'next',\r\n                index: this.tourService.getLastStep().index! + 1,\r\n                history: this.tourService.getHistory()\r\n            });\r\n            this.tourService.nextStep();\r\n        };\r\n    }\r\n    handlePrev() {\r\n        return this.handler = () => {\r\n            this.prev.emit({\r\n                tourEvent: 'prev',\r\n                index: this.tourService.getLastStep().index! - 1,\r\n                history: this.tourService.getHistory()\r\n            });\r\n            this.tourService.prevStep();\r\n        };\r\n    }\r\n    handleClose() {\r\n        return this.handler = () => {\r\n            if (this.tourService.getLastStep().index! + 1 === this.tourService.getLastStep()['total']) {\r\n                this.done.emit({\r\n                    tourEvent: 'done',\r\n                    index: this.tourService.getLastStep().index!,\r\n                    history: this.tourService.getHistory()\r\n                });\r\n            } else {\r\n                this.break.emit({\r\n                    tourEvent: 'break',\r\n                    index: this.tourService.getLastStep().index!,\r\n                    history: this.tourService.getHistory()\r\n                });\r\n            }\r\n            this.tourService.stopTour();\r\n        };\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport {\r\n  Ng3TourService,\r\n  Ng3TourComponent,\r\n  Ng3TourModalDirective,\r\n  Ng3TourEventDirective,\r\n  Ng3TourBackdropComponent\r\n} from '../public_api';\r\n\r\n// @dynamic\r\n@NgModule({\r\n  declarations: [\r\n    Ng3TourBackdropComponent,\r\n    Ng3TourComponent,\r\n    Ng3TourModalDirective,\r\n    Ng3TourEventDirective,\r\n  ],\r\n  entryComponents: [Ng3TourComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n  ],\r\n  exports: [\r\n    Ng3TourBackdropComponent,\r\n    Ng3TourComponent,\r\n    Ng3TourModalDirective,\r\n    Ng3TourEventDirective,\r\n  ]\r\n})\r\nexport class Ng3TourModule {\r\n  static forRoot(): ModuleWithProviders<Ng3TourModule> {\r\n    return {\r\n      ngModule: Ng3TourModule,\r\n      providers: [\r\n          Ng3TourService\r\n      ]\r\n    };\r\n  }\r\n  static forChild(): ModuleWithProviders<Ng3TourModule> {\r\n    return {\r\n        ngModule: Ng3TourModule,\r\n        providers: []\r\n    };\r\n  }\r\n}\r\n","export interface IStep { \r\n  readonly stepName: string;\r\n}\r\nexport interface ITourStep extends IStep {\r\n  route: string;\r\n  index: number;\r\n  title: string | {[propName: string]: any};\r\n  description: string | {[propName: string]: any};\r\n  backdrop: IBackdrop;\r\n  modal: IStepModal;\r\n  ctrlBtns: ICtrlBtns;\r\n  [key: string]: any\r\n}\r\n\r\nexport interface IStepProps extends IStep {\r\n  [key: string]: any\r\n}\r\n\r\nexport interface IBackdrop {\r\n  opacity: number;\r\n  targetFrameColor: string;\r\n  targetFrameSize: ITargetFrameSize;\r\n  targetFrameResize: number[];\r\n  backdropColor: string;\r\n  position: string;\r\n  isBackdrop: boolean;\r\n}\r\n\r\nexport interface ITargetFrameSize {\r\n  left: number,\r\n  right: number,\r\n  top: number,\r\n  bottom: number,\r\n  height: number,\r\n  width: number,\r\n  pageHeight: number,\r\n}\r\n\r\nexport const DefaultBackdrop: IBackdrop = {\r\n  opacity: .7,\r\n  targetFrameColor: 'transparent',\r\n  backdropColor: 'rgb(20, 60, 60)',\r\n  targetFrameSize: {top: 0, left: 0, right: 0, height: 0, width: 0, bottom: 0, pageHeight: 0},\r\n  targetFrameResize: [0],\r\n  isBackdrop: true,\r\n  position: 'absolute'\r\n}\r\n\r\nexport interface IModalPosition {\r\n  left?: string;\r\n  right?: string;\r\n  top?: string;\r\n  bottom?: string;\r\n}\r\n\r\nexport interface IModalStyles extends IModalPosition {\r\n  minWidth: string;\r\n  minHeight: string;\r\n  maxWidth: string;\r\n  maxHeight: string;\r\n  position: string;\r\n  color: string;\r\n}\r\n\r\nexport const DefaultModalStyles: IModalStyles = {\r\n  position: 'absolute',\r\n  minWidth: '250px',\r\n  minHeight: '150px',\r\n  maxWidth: '400px',\r\n  maxHeight: '600px',\r\n  color: '#121212',\r\n}\r\n\r\nexport interface IStepModal {\r\n  placement: string;\r\n  className: string;\r\n  horisontalIndent: number,\r\n  verticalIndent: number,\r\n  withoutCounter: boolean,\r\n  withoutPrev: boolean,\r\n  modalStyles: IModalStyles,\r\n  autofocus: boolean;\r\n  arrowToTarget: boolean;\r\n  modalSize: {modHeight: number, modWidth: number}\r\n  customTemplate: boolean,\r\n  delay: number,\r\n  animatedStep: boolean,\r\n  smoothScroll: boolean,\r\n  scrollTo: boolean,\r\n  closeOnClickOutside: boolean,\r\n  totalSteps: number,\r\n}\r\n\r\nexport const DefaultModal: IStepModal = {\r\n  className: '',\r\n  horisontalIndent: 50,\r\n  verticalIndent: 20,\r\n  withoutCounter: false,\r\n  withoutPrev: false,\r\n  arrowToTarget: true,\r\n  placement: 'down',\r\n  modalStyles: DefaultModalStyles,\r\n  customTemplate: false,\r\n  delay: 1000,\r\n  animatedStep: true,\r\n  smoothScroll: false,\r\n  scrollTo: true,\r\n  closeOnClickOutside: false,\r\n  autofocus: true,\r\n  modalSize: {\r\n    modHeight: 100,\r\n    modWidth: 100\r\n  },\r\n  totalSteps: 1\r\n}\r\n\r\nexport interface IStepEventProps {\r\n  tourEvent: string;\r\n  index: number;\r\n  history: number[];\r\n}\r\n\r\nexport interface ITourOptions {\r\n  tourBackdrop: IBackdrop;\r\n  tourModal: IStepModal;\r\n  tourEvents: ITourEventHandlers;\r\n  tourCtrlBtns: ICtrlBtns;\r\n}\r\n\r\nexport interface ITour extends ITourOptions{\r\n  steps: ITourStep[];\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface ITourProps {\r\n  steps: IStepProps[];\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface ICtrlBtns {\r\n  // prev?: {[propsName: string]: string} | string;\r\n  // next?: {[propsName: string]: string} | string;\r\n  // done?: {[propsName: string]: string} | string;\r\n  [propsName: string]: any;\r\n}\r\n \r\nexport interface IModalEventHandlers {\r\n  onNext($event: Event): void;\r\n  onPrev($event: Event): void;\r\n  onClose($event: Event): void;\r\n}\r\n\r\nexport interface IStepOptions {\r\n  backdropOptions?: IBackdrop;\r\n  tourModalOptions?: IStepModal;\r\n}\r\n\r\nexport interface StepSubject {\r\n  stepName: string;\r\n  delay?: number;\r\n  stepTarget?: Element;\r\n  targetSize?: Partial<ITargetFrameSize>\r\n}\r\n\r\nexport type TourEvents = 'start' | 'end' | 'break' | 'next' | 'prev'\r\n\r\nexport type TourEventHandler =  (props: {\r\n  tourEvent: TourEvents,\r\n  step?: number | string,\r\n  history?: number[],\r\n  tour?: ITourProps,\r\n}) => void;\r\n\r\nexport interface ITourEventHandlers {\r\n  tourStart: TourEventHandler;\r\n  tourEnd: TourEventHandler;\r\n  tourBreak: TourEventHandler;\r\n  next: TourEventHandler;\r\n  prev: TourEventHandler;\r\n}\r\n\r\nexport const ButtonsDefaultTranslation = {\r\n  done: {\r\n    'en-EN': 'done',\r\n    'ru-RU': 'закр',\r\n    'fr-FR': 'fini',\r\n  },\r\n  prev: {\r\n    'en-EN': 'prev',\r\n    'ru-RU': 'пред',\r\n    'fr-FR': 'préc'\r\n  },\r\n  next: {\r\n    'en-EN': 'next',\r\n    'ru-RU': 'след',\r\n    'fr-FR': 'proch',\r\n  },\r\n  of: {\r\n    'en-EN': 'of',\r\n    'fr-FR': 'de',\r\n    'ru-RU': \"из\",\r\n  }\r\n}\r\n\r\nexport const DefaultTourEventHandler: TourEventHandler = (props) => {};\r\n\r\nexport const DefaultTourEventHandlers: ITourEventHandlers = {\r\n  tourStart: DefaultTourEventHandler,\r\n  tourEnd: DefaultTourEventHandler,\r\n  tourBreak: DefaultTourEventHandler,\r\n  next: DefaultTourEventHandler,\r\n  prev: DefaultTourEventHandler,\r\n};\r\n\r\nexport const DefaultTourOptions: ITourOptions = {\r\n  tourCtrlBtns: ButtonsDefaultTranslation,\r\n  tourEvents: DefaultTourEventHandlers,\r\n  tourBackdrop: DefaultBackdrop,\r\n  tourModal: DefaultModal,\r\n}\r\n\r\nexport function setTourProps(props: Partial<ITourOptions>, defaultProps: ITourOptions = DefaultTourOptions): ITourOptions {\r\n  const ctrlBtns = {...defaultProps.tourCtrlBtns, ...props.tourCtrlBtns},\r\n  tourEvents = {...defaultProps.tourEvents, ...props.tourEvents},\r\n  backdropOptions = {...defaultProps.tourBackdrop, ...props.tourBackdrop},\r\n  tourModalOptions = {...defaultProps.tourModal, ...props.tourModal};\r\n  return {tourCtrlBtns: ctrlBtns, tourEvents, tourModal: tourModalOptions, tourBackdrop: backdropOptions};\r\n}\r\n  ","/*\r\n * Public API Surface of ng-tour\r\n */\r\n\r\nexport * from './lib/components/ng3-tour.component';\r\nexport * from './lib/components/ng3-tour-backdrop/ng3-tour-backdrop.component';\r\nexport * from './lib/services/ng3-tour.service';\r\nexport * from './lib/directives/ng3-tour-modal.directive';\r\nexport * from './lib/directives/ng3-tour-modal-events.directive';\r\nexport * from './lib/ng3-tour.module';\r\nexport * from './lib/interfaces/ng3-tour.interface';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}}}